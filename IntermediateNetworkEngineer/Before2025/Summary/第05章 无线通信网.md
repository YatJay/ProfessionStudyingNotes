# 第5章 无线通信网

## WLAN基础

### 移动通信的发展历程

蜂窝网络通信使用**频分复用**技术，与A相邻的信道没有和A同频率的，远处不与A直接相邻的地方才有和A同频率的，实相同频率的区域隔离，从而实现信道的频分复用

| 第几代移动通信 | 信号类型         |
| -------------- | ---------------- |
| 1G             | 模拟信号蜂窝网络 |
| 2G以及之后     | 数字信号蜂窝网络 |

### 移动通信的制式

注：4G时代中国移动只有TD-LTE，其他2家有TD-LTE和FDD-LTE两种

| 运营商   | 2G   | 3G       | 4G                 | 备注                                    |
| -------- | ---- | -------- | ------------------ | --------------------------------------- |
| 中国移动 | GSM  | TD-SCDMA | TD-LTE             | CDMA码分多址 TD是时分复用 FDD是频分复用 |
| 中国联通 | GSM  | WCDMA    | TD-LTE<br/>FDD-LTE | CDMA码分多址 TD是时分复用 FDD是频分复用 |
| 中国电信 | CDMA | CDMA2000 | TD-LTE<br/>FDD-LTE | CDMA码分多址 TD是时分复用 FDD是频分复用 |

### 802.11标准(重点)

### WLAN与WiFi的区别与联系

| 术语                               | 定义                                                         | 示例技术                                        |
| ---------------------------------- | ------------------------------------------------------------ | ----------------------------------------------- |
| WLAN (Wireless Local Area Network) | 一种利用无线通信技术在有限区域内连接计算机设备和移动终端，实现互连互通及资源共享的网络类型。 | 蓝牙、红外、WiFi(WiFi 即是基于802.11协议的WLAN) |
| WiFi                               | 基于802.11协议标准的WLAN实现方式，提供无线高速互联网接入和局域网内通信服务。<br/>所有802.11产品都会经过WiFi联盟测试，通过测试之后贴WiFi标志 | IEEE 802.11 a/b/g/n/ac/ax 等标准                |

### 802.11标准详细

802.11标准共计7个协议，教材上面只有5个，即*下表的前面5个*

务必要记住各个802.11标准的**工作频段**，**不重叠信道**个数

| 技术参数       | 助记                                                         |
| -------------- | ------------------------------------------------------------ |
| **工作频段**   | 特殊的，802.11a工作在5.8Ghz频段；802.11n工作在2.4Ghz/5.8Ghz两个频段 |
| **非重叠信道** | 2.4Ghz的都是3个非重叠信道；5.8Ghz的都是5个非重叠信道；2.4Ghz/5.8Ghz两个频段的是3 + 5 = 8个非重叠信道 |
| 调制技术       | 最新的n、ac和ax使用了MIMO技术(802.11n也用了，表格中没写)使得速率大幅提高 |
| 物理发送速率   | 下表中该栏标准支持的协商速率，黄色标注表示支持的最大协商速率 |

![image-20230925210900718](https://img.yatjay.top/md/image-20230925210900718.png)

上表中部分内容有误，以下表为准

| 标准                                     | 发布时间 | <font color=red>工作频段</font> | 非重叠信道 | 调制技术                         | <font color=red>物理发送速率 (Mbps)</font>                   | 实际吞吐(单天线/单用户) | 兼容性<br/>(看频段) |
| ---------------------------------------- | -------- | ------------------------------- | ---------- | -------------------------------- | ------------------------------------------------------------ | ----------------------- | ------------------- |
| 802.11                                   | 1997     | 2.4GHz                          | 3          | FHSS/DSSS                        | 1, <font color=red>2</font>                                  | 200K                    | N/A                 |
| 802.11b                                  | 1999     | 2.4GHz                          | 3          | CCK/ DSSS                        | 1,2,5.5, <font color=red>11</font>                           | 5M                      | 与11g产品可互通     |
| 802.11a                                  | 1999     | 5.8GHz                          | 5          | OFDM                             | 6, 9, 12, 18, 24, 36, 48, <font color=red>54</font>          | 22M                     | 与11b/g不能互通     |
| 802.11g                                  | 2003     | 2.4GHz                          | 3          | CCK/OFDM                         | 6, 9, 12, 18, 24, 36, 48, <font color=red>54</font>          | 22M                     | 与11b产品可互通     |
| <font color=red>802.11n</font>           | 2009     | 2.4G/5.8G                       | 3+5        | OFDM+<font color=red>MIMO</font> | 理论最高可以达到<font color=red>600Mbps</font>               | 100+ M                  | 向下兼容11a/b/g     |
| <font color=red>802.11ac</font>          | 2012     | 5.8G                            | 5          | OFDM+<font color=red>MIMO</font> | 理论上可以达到最高约<font color=red>6.9Gbps（6900Mbps）</font><br/>在早期市场推广阶段，实际可用的最高速度为<font color=red>1.3Gbps(1300Mbps)</font> | 900M                    | 向下兼容11a/n       |
| <font color=red>802.11ax</font>(Wi-Fi 6) | 2018     | 2.4G/5.8G                       | 3+5        | OFDM+<font color=red>MIMO</font> | 9600<br/>理论峰值速率可以达到10Gbps以上                      | 1G以上                  | 向下兼容11a/n       |

> 802.11各类协议的理论极限速率比较
>
> | 标准     | 理论最高物理发送速率                                         |
> | -------- | ------------------------------------------------------------ |
> | 802.11   | 802.11最初的标准（有时也称为802.11 legacy或802.11原始版）在1997年发布时，其理论物理发送速率为**2Mbps**。这个版本主要采用直接序列扩频（DSSS）技术，在2.4GHz频段上工作。 |
> | 802.11b  | 802.11b标准理论上的物理发送速率最高为**11Mbps**（兆比特每秒）。这是在理想无线环境条件下，采用互补码键控（CCK）调制技术时的最大数据传输速率。 |
> | 802.11a  | 802.11a标准理论上的物理发送速率最高可以达到**54Mbps**。这是在使用52-subcarrier的正交频分复用（OFDM）调制技术，并且在一个20MHz信道带宽内，在理想无损无线传输环境下的理论峰值速率。 |
> | 802.11g  | 802.11g标准理论上的物理发送速率最高可以达到**54Mbps**（兆比特每秒）。这是在理想条件下的最大数据传输速率，采用正交频分复用（OFDM）技术，工作在2.4GHz的ISM频段。 |
> | 802.11n  | 802.11n标准理论上的物理发送速率最高可以达到**600Mbps**。这一速率通常是在使用40MHz信道宽度、最高效的调制方案（如64-QAM或更高阶的调制）、并启用多输入多输出（MIMO）技术，且在理想环境下（无干扰、完美信号质量）的情况下才能实现的。 |
> | 802.11ac | 802.11ac标准理论上可以达到非常高的物理发送速率。在其最初版本中，单空间流（Spatial Stream）在80MHz信道宽度下使用256-QAM调制时，理论最大速率为**433.3Mbps**。当进一步扩展到160MHz信道宽度，并且结合更多空间流（最高8 Spatial Streams），理论上可以达到最高约**6.9Gbps（6900Mbps）**的物理发送速率。在早期市场推广阶段，实际可用的最高速度为**1.3Gbps**（在单用户情况下，使用3条空间流和80MHz信道宽度） |
> | 802.11ax | 802.11ax标准（即Wi-Fi 6）理论上的物理发送速率非常高，单个空间流（Single-User MIMO, SU-MIMO）的最高速率取决于使用的调制方式、编码效率以及所配置的频宽等因素。在理想条件下，802.11ax标准利用160MHz信道宽度、1024-QAM调制、多个空间流（最高可达8x8 MIMO）以及OFDMA（正交频分多址接入）等多种先进技术，理论峰值速率可以达到**10Gbps以上**。 |
>
> 在实际应用中，受到信号干扰、距离、障碍物以及无线信道条件等因素影响，实际传输速率通常会低于这个理论最大值。

### WLAN网络分类

| 网络类型                                 | 描述                                                         | 示例场景                                   |
| ---------------------------------------- | ------------------------------------------------------------ | ------------------------------------------ |
| 基础设施网络 (Infrastructure Networking) | 通过无线接入点(AP)接入，设备连接至中央集中的路由器或交换机以接入网络 | 商业场所、家庭Wi-Fi、公共场所无线网络      |
| 特殊网络 (Ad Hoc Networking)             | 不通过无线接入点(AP)，由参与通信的计算机或其他设备之间自组织建立临时性、点对点的网络 | 军事通信、紧急救援、寝室间无AP的局域网游戏 |
| 分布式系统                               | 利用一台服务器集中控制和管理众多无线接入点(AP)，形成大规模、一体化的无线网络 | 大型企业园区、大学校园、智慧城市无线覆盖   |

注意：虽然分布式系统的描述更偏向于对多个无线AP的管理方式，但其本身并不特指某一类网络类型，而是可以应用于基础设施网络等多种网络架构中，实现对无线网络资源的大规模管理和整合。

### WLAN通信技术

无线网主要使用三种通信技术：(记住名字即可)

- **红外线**
- **扩展频谱**：将信号散布到更宽的带宽上以**减少发送阻塞和干扰**的机会(使用最多)
- **窄带微波技术**

WLAN主要使用的有2种**扩展频谱技术**：

- 频率跳动扩频FHSS
- 直接序列扩展频谱DSSS（**记住<font color=red>直接序列扩展频谱DSSS通过伪随机模式产生器生成伪随机数</font>来实现扩频**）

## 无线频谱介绍

### ISM频段

ISM频段，此频段主要是开放给**工业、科学、医学**(Industry、Science、Medicine)三个主要机构使用

ISM频段这三个行业免费使用，不需要向无线电管理委员会申请

WiFi使用的就是2.4GHz和5.8GHz，分别属于科学频段和医疗频段

### 不重叠信道

| 频段       | 信道总数                                                     | 每个信道宽度 | 不重叠信道个数 | 不重叠信道编号                  |
| ---------- | ------------------------------------------------------------ | ------------ | -------------- | ------------------------------- |
| 2.4GHz频段 | - 国际标准理论上可定义14个，实际使用时取决于地区法规<br/>- CN规定可使用为13个即1到13信道 | 22Mhz        | 3              | 1、6、11                        |
| 5.8GHz频段 | - 取决于地区法规及所支持的WiFi标准版本<br/>- 本表后所列为CN规定 | 20MHz(CN)    | 5(CN规定)      | 149、153、157、161、165(CN规定) |

因此，WLAN不重叠信道有3 + 5 = 8个

#### 信道重用(频分复用)

由于同一个频段下，可用信道是有限的，相邻信道之间有重叠。

如果相近的2个AP设置频道相同，就会产生同频干扰，为了解决这个问题，引入了蜂窝技术——**相邻位置一定是不同信道**(蜂窝网络)

### WLAN频段与信道

国际标准当中，2.4GHz频段被划分为14个交叠的、错列的20MHz无线载波信道，它们的中心频率间隔分别为5MHz。

| 802.11版本      | 工作频段 | 备注                                                         |
| --------------- | -------- | ------------------------------------------------------------ |
| 802.11b/g/n/ax  | 2.4GHz   | - 802.11b每个信道需要占用22MHz<br/>- 802.11g、802.11n每个信道需要占用20MHz<br/>- 802.11n完全兼容802.11b和802.11g |
| 802.11a/n/ac/ax | 5.8GHz   | 无                                                           |

> 在国际标准中，2.4GHz频段理论上定义了14个信道，但是在不同国家和地区，实际可用的信道数量会因为各国无线电管理机构的规定而有所差异。
>
> 在中国，2.4GHz频段内有效合法的信道总数是13个，从信道1到信道13，中心频率分别为2402MHz、2407MHz、……、2472MHz。这是因为某些地区的规范可能不会使用所有理论上的信道，以避免与其他无线通信服务产生冲突或遵守当地的频谱管理规则。在美国等其他地区，虽然理论上也是14个信道，但有时信道12和13不被推荐使用，以免与其它无线设备发生干扰。

## 802.11介质访问

### 802.11MAC层

802.11无线协议标准为MAC子层定义了3种访问控制机制

| 访问控制机制名称                                             | 描述                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| CSMA/CA（载波监听多点接入/冲突避免）<br>分布式协调功能 (DCF) | - 大家争用访问<br>- 终端在发送前监听信道是否空闲<br>- 若检测到信道空闲，则尝试发送数据，若检测到信号则退避一段时间再试，以此避免冲突 |
| RTS/CTS信道预约机制                                          | - 避免冲突的一种补充方法<br>- 发送方发送RTS（请求发送）给接收方<br>- 接收方回复CTS（清除发送）通知所有终端即将占用信道(接下来的n秒钟就不要给我发消息)<br>- 其他终端收到CTS后记录信道占用时间(启动一个计时器，就不会在n秒内给上述接收方尝试发送消息)，从而避免在此期间发送数据 |
| PCF点协调功能                                                | - 由接入点（AP）集中管理信道访问<br>- AP周期性地轮询所有终端<br>- 类似令牌环协议，AP逐一轮流赋予各终端发送权限<br>- 只有获得发送权限的终端才能在指定时间内发送数据 |

#### 为何不使用CSMA/CD(载波监听多点接入/冲突检测)

- 有线连接使用CSMA/CD，其产生冲突很好检测：如果线路上有冲突，电平高低叠加就会发生变化，因而可以检测到冲突；

- 在无线连接当中，存在隐藏节点问题：比如下图A、B、C三个终端，A、C的作用范围如下，A、C彼此看不到彼此。当A、C检测不到无线信号时，都以为B是空闲的，因而都向着B发送数据，结果产生碰撞


![image-20230925231541884](https://img.yatjay.top/md/image-20230925231541884.png)

### 802.11的3种帧间间隔(记住)

| IFS(Interframe Space，帧间间隔)类型                          | 描述                          | 优先级 | 应用场景                                                     |
| ------------------------------------------------------------ | ----------------------------- | ------ | ------------------------------------------------------------ |
| SIFS (Short Interframe Space，短IFS)                         | 最短的IFS，**优先级最高**     | 最高   | 用于需要**快速立即响应**的交互操作，如确认帧的发送、ACK帧回应数据帧等 |
| PIFS (Point Coordination Function Interframe Space，点协调IFS) | 中等长度的IFS，**优先级居中** | 居中   | 在点协调功能(PCF)操作模式下使用，用于协调访问和控制帧之间的时序 |
| DCF Interframe Space (分布式协调IFS)                         | 最长的IFS，**优先级最低**     | 最低   | 在分布式协调功能(DCF)中用于**异步帧的竞争访问**，确保不同设备之间有足够的延迟以避免碰撞 |

## 移动AD Hoc网络

### AD Hoc简介

802.11定义AD Hoc网络是**由无线移动节点组成的对等网，无需网络基础设施**（即不需要无线AP支持，仅通过各个节点主机支持即可）的支持，每个节点**既是主机，又是路由器**，是一种**MANNET(Mobile Ad Hoc Network)网络**。

### MANET网络的特点(偶尔考选择)

- 临时组网，网络拓扑结构动态变化的，**不能使用传统路由协议**
- 无线信道提供的带宽较小，信号衰落和噪声干扰的影响却很大
- 无线终端携带的电源能量有限
- 容易招致网络窃听、欺骗、拒绝服务等恶意攻击的威胁

## 无线WLAN安全

已核对下表内容无误

| 序号 | 安全措施                   | 描述                                                         | 认证方式                                                    | 加密方式                                               |
| ---- | -------------------------- | ------------------------------------------------------------ | ----------------------------------------------------------- | ------------------------------------------------------ |
| 1    | SSID访问控制               | 隐藏WiFi网络名称（SSID），仅允许知道该名称的用户连接<br/>让不知道的人搜索不到（SSID即WiFi名称） | N/A                                                         | N/A                                                    |
| 2    | 物理地址过滤               | 根据MAC地址进行白名单或黑名单控制                            | N/A                                                         | N/A                                                    |
| 3    | WEP认证和加密              | 早期的无线网络安全协议                                       | PSK预共享密钥认证<br/>（PSK即预共享秘钥，输入密码才能上网） | RC4对称加密算法<br/>(终端与无线AP的通信数据加密后传输) |
| 4    | WPA (802.11i草案)          | WEP安全性升级版                                              | 802.1x认证<br/>（不仅要输密码，还要输入用户名）             | RC4增强版 + TKIP（临时密钥完整协议，能够动态改变密钥） |
| 5    | WPA2 (802.11i**正式标准**) | 基于WPA进一步强化的安全协议                                  | 802.1x认证（同样需提供用户名和密码）                        | AES-CCMP协议（基于高级加密标准AES）                    |

注：
- WPA/WPA2都具备完整性认证和防重放攻击能力。
- WPA2相较于WPA显著提升了加密安全性，弃用了不安全的RC4算法，转而采用更安全的AES加密算法。

> 在上表中，TKIP（Temporal Key Integrity Protocol，临时密钥完整性协议）是一种加密协议，它是针对早期WEP（ Wired Equivalent Privacy，有线等效保密）协议存在的安全漏洞而开发的改进型加密方案。WEP加密由于存在许多安全缺陷，容易受到破解攻击。
>
> TKIP是WPA（Wi-Fi Protected Access）标准的一部分，旨在增强无线网络的安全性，特别是在802.11i草案阶段被广泛采用。TKIP的主要特点包括：
>
> 1. 动态密钥生成：每次数据传输都会生成一个新的临时密钥，从而避免了WEP中固定密钥长时间使用导致的安全风险。
> 2. 密钥完整性检查：通过添加消息完整性检查码（MIC），确保数据在传输过程中未被篡改。
> 3. 顺序编号：对每个数据包使用序列号以防止重放攻击。
>
> 尽管TKIP比WEP有所改进，但随着时间推移和技术发展，尤其是随着AES加密算法的应用，TKIP的安全性也逐渐显现不足。在WPA2标准中，AES取代了TKIP成为推荐的加密算法，采用更为强大的AES-CCMP协议来保证无线网络数据传输的安全性。

## 章节总结

- 无线局域网扩频技术FHSS/DSSS
- 无线频谱与信道2.4G/5G，中国分别有3个和5个不重叠信道
- CSMA/CA，隐藏节点，MANET
- 无线安全:WEP、WPA、WPA2 AES/TPIK/CCMP