# 4-3-2 分类编址的IPv4地址

本节课我们介绍 IPv 4 地址编制方法的第一个历史阶段，也就是分类编制的 IPv4 地址。分类编制的 IPv4 地址分为A、B、C、D、 E 五类。 

A 类地址的网络号部分占8bit，比特主机号部分占24bit，比特网络号的最高位固定为0。 

B 类地址的网络号部分和主机号部分各占16bit，比特网络号的最高两位固定为10。 

C 类地址的网络号部分占 24 个bit，比特主机号部分占 8 个bit，比特网络号的最高三位固定为110。 

D 类地址是多播地址，其最高4位固定为1110。 E 类地址是保留地址，其最高4位固定为1111。

![image-20230320212446195](https://img.yatjay.top/md/image-20230320212446195.png)

注意：

1. 只有 A 类、 B 类和 C 类地址可分配给网络中的主机或路由器的各接口
2. 主机号为全0的地址是网络地址，不能分配给主机或路由器的各接口
3. 主机号为全 1 的地址是广播地址，不能分配给主机或路由器的各接口。

## A类地址

![image-20230320212857346](https://img.yatjay.top/md/image-20230320212857346.png)

8位网络号的最高位固定为0，其余七位全部取 0 时，就是 A 类网络的最小网络号，其十进制值为0，该网络号被保留，不能指派。因此 A 类网络第一个可指派的网络号为最高位固定为0，其余七位为0000001，其十进制值为1，则第一个可指派的网络地址1.0.0.0。

将 24 位的主机号全部取0，就可以得到该网络的网络地址，其点分十进制为1.0.0.0。

当8位网络号的低7位全部取 1 时，就是 A 类网络的最大网络号。其十进制值为127，该**网络号被用于本地软件还回测试，不能指派**。将 127 开头的 IPv4 地址的主机号部分的最低位取1，其他位取0，就可得到最小的本地软件还回测试地址(**主机号全0为网络地址**)127.0.0.1。

将 127 开头的 IPv4 地址的主机号部分的最低位取0，其他位取1(**主机号全1时为广播地址**)，就可得到最大的本地软件还回测试地址，其点分十进制为127.255.255.254。

A 类网络最后一个**可指派**的网络号为最高位固定为0，低第七位为1111110(网络号全1为127，不指派)，其十进制值为126。将 24 位的主机号全部取0，就可以得到该网络的网络地址，其点分十进制为126.0.0.0。

A 类**可指派的**网络的数量：网络数量只看网络号即可，由于最高位固定为0，则网络号共2^7=128个，可指派网络数量还要减去**0后全1的127**和**保留不指派的最小网络号0**，可指派的网络数量一共126个

每个网络中**可分配的**IP地址数量：每个网络中IP地址数只看主机号即可，主机号共2^24^=16777216个，可分配的IP地址数还要减去**全0表示网络地址**和**全1表示广播地址**，可分配的网络数量一共2^24^-2=16777216-2=16777214个

## B类地址

![image-20230320214608538](https://img.yatjay.top/md/image-20230320214608538.png)

再来看 B 类地址的细节， 16 位网络号的最高 2 位固定为10，低14 位全部取 0 时，就是 B 类网络的最小网络号，其点分十进制为 128.0，该网络号是 B 类网第一个可指派的网络号。

将 16 位的主机号全部取0，就可以得到该网络的网络地址，其点分十进制为128.0.0.0。 

16 位网络号的最高 2 位固定为10，低 14 位全部取一时，就是 B 类网络的最大网络号，其点分十进制为 191. 255，该网络号是 B 类网最后一个可指派的网络号。

将 16 位的主机号全部取0，就可以得到该网络的网络地址，其点分十进制为191.255.0.0。

B类网络数量：2^14=16384

B类每个网络中可分配的IP地址数量：2^16-2=65534

需要说明的是，有些教材中指出 128. 0 是保留网络号， B 类第一个可指派的网络号为 128. 1。但根据 2002 年9月发表的 RFC 3330 文档， **128. 0 网络号已经可以分配**了，128.0.0.0位于荷兰

## C类地址

![image-20230320214752711](https://img.yatjay.top/md/image-20230320214752711.png)

24 位网络号的最高 3 位固定为110，低 21 位全部取 0 时，就是 C 类网络的最小网络号，其点分十进制为192.0，该网络号是 C 类网第一个可指派的网络号

将8位的主机号全部取0，就可以得到该网络的网络地址，且点分十进制为192.0.0.0。

24 位网络号的最高 3 位固定为110，低 21 位全部取一时，就是 C 类网络的最大网络号，其点分十进制为223.255.255，该网络号是 C 类网最后一个可指派的网络号

将8位的主机号全部取0，就可以得到该网络的网络地址，其点分十进制为223.255.255.0。

C类网络数量：2^21 = 2097152

C类每个网络中可分配IP地址数量：2^8-2=254

需要注意的是，有些教材中指出192.0.0是保留网络号, C 类第一个可指派的网络号为192.0.1。但根据 2002 年9月发表的 RFC 3330 文档，**192.0.0网络号已经可以分配**了，只不过目前还没有分配出去

## 练习

### 练习1

![image-20230320215143943](https://img.yatjay.top/md/image-20230320215143943.png)

### 练习2

![image-20230320215242723](https://img.yatjay.top/md/image-20230320215242723.png)

地址0.0.0.0是一个特殊的 IPv4 地址，只能作为源地址使用，表示“在本网络上的本主机”

**封装有DHCP的Discovery发现报文的 IP 分组的源地址使用0.0.0.0**

以 127 开头，且后面三个字节非全0或全 1 的 IP 地址是一类特殊的 IPv4 地址，既可以作为源地址使用，也可以作为目的地址使用，用于本地软件环回测试。例如常用的环回测试地址127.0.0.1

地址255.255.255.255(即全1)是一个特殊的IPv4 地址，只能作为目的地址使用，表示只在本网络上进行广播，各路由器均不转发。

### 练习3

![image-20230320215515432](https://img.yatjay.top/md/image-20230320215515432.png)

## 本节小结

![image-20230320215540197](https://img.yatjay.top/md/image-20230320215540197.png)

