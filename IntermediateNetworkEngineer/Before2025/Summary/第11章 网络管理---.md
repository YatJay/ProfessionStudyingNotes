# 网络管理基础

## 网络管理软件vs网络监控软件

日常使用的网管软件有以下两大类，分别是网络管理软件和网络监控软件

| 特性/类型    | 网络管理软件                                   | 网络监控软件                                                 |
| ------------ | ---------------------------------------------- | ------------------------------------------------------------ |
| **主要功能** | 监控网络流量，配置策略管理，设备健康管理       | 监控网络设备性能（如CPU、内存使用情况），环境参数（如机房温湿度），网络设备状态 |
| **典型应用** | 流量控制，策略下发，网络维护优化               | 故障预警，性能分析，资源利用率监控                           |
| **常见软件** | 华为eSight，华三IMC，锐捷SNC                   | Zabbix（开源），贝塔（商用），锐捷Rill，华三IMC扩展模块      |
| **设备支持** | 侧重自家品牌设备管理，兼容性高                 | 广泛支持各类厂商设备，需关注兼容性                           |
| **成本考量** | 根据品牌和功能，成本不一，可能包含在设备采购中 | 开源软件成本较低，商用软件及高级功能成本较高，可能需额外投资 |
| **目标用户** | 网络管理员，IT运维团队                         | 系统管理员，数据中心管理人员，IT运维团队                     |
| **部署方式** | 可能涉及特定硬件配合，如管理服务器             | 通常较灵活，可基于服务器软件或云服务部署                     |

## 网络管理体系架构(记住)

即**网络管理的五大功能域**：**故障管理**、**配置管理**、**计费管理**、**性能管理**和**安全管理**

助记：“**安配能计障**”

注意：

- 故障管理：尽快发现故障，找出故障原因，以便**采取补救措施**(15上48)。
- 故障管理的目标是自动发现、检测故障，不是自动排除故障

## 网络监控系统的2种体系架构

![image-20230313214950034](https://img.yatjay.top/md/image-20230313214950034.png)

### 代理与监视器两种通信方式

代理与监视器两种通信方式：**轮询和事件报告**

| 通信方式         | 轮询                                                         | 事件报告                                                     |
| ---------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **原理描述**     | 监控系统定期向被监控对象请求数据，以获取其状态信息。         | 被监控对象在状态发生变化或出现问题时主动向监控系统发送通知。 |
| **数据更新频率** | 固定时间间隔（例如每15分钟）更新一次。                       | 实时更新，即变化即报告。                                     |
| **资源消耗**     | 在没有状态变化的情况下也可能频繁查询，可能造成一定的网络和系统资源开销。 | 相对较低，仅在有实际事件发生时才触发通信，节省资源。         |
| **及时性**       | 更新不及时，问题可能在两次轮询之间发生而未被立即发现。       | 高，能即时发现问题并报告，适合需要快速响应的场景。           |
| **应用场景**     | 适用于对实时性要求不高、资源消耗敏感度较低的监控环境。       | 适用于对实时性要求高、需要快速故障检测与响应的场景。         |
| **示例**         | 检查服务器硬盘使用率、CPU负载等常规维护监控。                | 系统异常、硬件故障、安全入侵等需要立即处理的紧急情况报告。   |

总结来说，轮询机制简单易实现，但实时性较差且可能增加不必要的系统开销；而事件报告机制更为高效灵活，能够迅速响应变化，但在实现上可能相对复杂，需要被监控对象具备主动报告的能力。选择哪种方式取决于具体的监控需求和系统环境。

# SNMP

SNMP(Simple Network Management Protocol)，简单网络管理协议

## 网络管理协议的5大类标准

| 网络管理协议               | 制定机构 | 标准特点                                      | 应用层次           | 主要用途                       |
| -------------------------- | -------- | --------------------------------------------- | ------------------ | ------------------------------ |
| CMIS/CMIP                  | ISO      | 面向OSI模型，功能全面，内置安全机制           | 应用层             | 提供OSI环境下的网络管理服务    |
| **SNMP**                   | IETF     | 简单、广泛应用，从v1到v3逐步增强安全性与功能  | 应用层             | IP网络中最常用的监控与管理协议 |
| **RMON (RMON-1 & RMON-2)** | IETF     | 扩展SNMP功能，提供更详细的网络监控数据        | 数据链路层至应用层 | 主要用于分析网络性能和故障诊断 |
| CMOL (LMMP前身)            | IEEE     | 专为局域网设计，直接位于LLC层，无需网络层协议 | LLC层              | 局域网环境的管理，但未广泛采用 |
| TMN                        | ITU-T    | 面向电信运营商，综合网络管理框架              | 多层次             | 电信网络的综合运营管理         |

注意：

- 表格中，"ITU-T"代表国际电信联盟电信标准化部门，它制定的TMN标准主要面向大型电信运营商的网络管理，尽管一般不在基础考试范围内，但对于理解整个网络管理标准体系是重要的补充。

- RFC(Request For Comments)文档是由**互联网工程任务组（IETF）**定义并维护的。IETF是一个国际性、非政府、开放性的互联网技术开发和标准制定组织。RFC文档是关于Internet的技术资料汇编，详细讨论了计算机网络的方方面面，重点在网络协议、进程、程序、概念等。"RFC编辑者"负责RFC最终文档的编辑审订，并维护RFC的索引。在RFC近30年的历史中，"RFC编辑者"一直由一个工作小组来担任，这个小组受到“因特网社团”（Internet Society，ISOC）的支助。

## SNMPv1/v2/v3对比





## 网络管理数据库MIB-2(重点常考)

管理端查询客户端的信息，客户端的信息是树状结构，通过树的节点来确定查询的对象，这就是**被管理对象标识符OID**，OID的书写方式是以` . `分隔树的节点，即查询对象用OID来表示

![image-20230313224221473](https://img.yatjay.top/md/image-20230313224221473.png)

比如查询private值，就查1.3.6.1.4，知道OID长什么样子就行

# RMON

RMON(Remote Network Monitoring)

## RMON简介

- 用于**监视网络通信情况**的设备叫网络监视器(Monitor）或网络分析器(Analyzer)、探测器(Probe）等

  理解：

  - 监视网络通信的情况就是监测网络**流量**——**RMON主打对流量的监控**；
  - 网管软件则是用来监测网络**设备**

- RMON定义了**网络管理信息库**RMON MIB-lI(流量信息），与SNMP MIB(设备信息)

- RMON目标：监视**子网范围**即局域网(注意是子网，名义上称为远程网络监控，实际目标不是远程网络)内通信，从而减少管理站和被管理系统之间的通信负载

![image-20230314202042019](https://img.yatjay.top/md/image-20230314202042019.png)

> RMON，主要**针对局域网**提供大量的统计信息，解决 SNMP 无法解决的针对整个网络的有关问题，如最简单的流量分析问题等。**RMON 依靠安装于本地网络中**，RMON 监视器收集统计信息，RMON 监视器可以是一个单独的设备，也可以位于某个设备内部。**RMON 是对 SNMP 的增强**，主要体现在 MIB 方面以及相应的管理信息结构。
>
> SNMP 不支持管理站改变管理信息库中的叶子节点，不能增加和删除 MIB 中的管理对象实例。管理站也不能向管理对象发出执行一个动作的命令。管理站只能逐个访问管理信息库中的叶子节点，不能一次性访问一个子数。
> 一般 RMON 的目标只是监视子网范围内的通信，从而减少管理站和被管理站系统间的通信负担。

## SNMP和RMON对比

SNMP（Simple Network Management Protocol）和RMON（Remote Network Monitoring）的对比：

| 特性/协议      | SNMP（简单网络管理协议）                                     | RMON（远程网络监视）                                         |
| -------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **定义**       | 一种广泛使用的网络管理协议，用于监控和管理网络设备。         | SNMP的扩展，专注于网络监控，提供更深入的网络数据分析能力。   |
| **主要目标**   | 提供**网络设备的基本管理和监控**功能，如状态查询、配置修改、故障报警等。 | 增强SNMP的监控能力，特别是针对**局域网的流量分析**、错误检测和统计信息收集。 |
| **功能特性**   | 支持基本的设备管理任务，如获取设备状态、配置管理、故障和性能管理。 | 在SNMP基础上提供更丰富的数据收集，如流量统计、协议分布、主机矩阵等，有利于故障诊断和性能优化。 |
| **数据收集**   | 需要网络管理系统主动轮询设备获取信息。                       | 可以配置为被动监听模式，自动收集并存储数据，减少网络负担。   |
| **监控深度**   | 提供设备层面的信息，如接口状态、CPU负载等。                  | 提供更深层面的数据分析，包括网络层流量、应用层会话等详细信息。 |
| **部署与实施** | 几乎所有网络设备都支持SNMP，易于部署但配置复杂度因需求而异。 | 需要在网络中部署RMON监视器或启用设备内置的RMON功能，实现更细致的监控。 |
| **成本**       | 通用协议，软件和实施成本相对较低。                           | 对于高级监控需求，可能需要额外的硬件（如RMON探针）或高级软件支持，成本可能更高。 |

# 网络管理常用命令

## ifconfig

ipconfig：查看IP、DHCP、DNS服务等的配置的详细信息

![image-20230314203343563](https://img.yatjay.top/md/image-20230314203343563.png)

## ping/traceroute

![image-20230314203605208](https://img.yatjay.top/md/image-20230314203605208.png)

## arp

arp缓存记录了IP地址和MAC地址的映射

![image-20230314204148968](https://img.yatjay.top/md/image-20230314204148968.png)

## netstat

netstat工作在运输层

Netstat是控制台命令,是一个**监控TCP/IP网络**的非常有用的工具，它可以显示路由表、实际的网络连接以及每一个网络接口设备的状态信息。Netstat用于显示与IP、TCP、UDP和ICMP协议相关的统计数据，一般用于检验本机各端口的网络连接情况。

![image-20230314204342239](https://img.yatjay.top/md/image-20230314204342239.png)

尤其是 `-r` 显示路由表，等价于`route print`经常考查

## route/nslookup

![image-20230314204531234](https://img.yatjay.top/md/image-20230314204531234.png)

nslookup命令的交互式解析是指，只输入nslookup命令，后面不加域名，输入nslookup之后提示用户设置字段值来查询，可以指定由某个DNS服务器进行解析

# 章节总结

网络管理五大功能域：“安配能计障”

SNMP

- SNMPv1:应用层协议、UDP、团体名

- SNMPv2: getbluck、inform

- SNMPv3:架构、安全

  

MIB (OID)

RMON 网络流量分析

网络管理命令(重点)



