# 6-11 CIDR无类域间路由（超网）

## VLSM回顾

VLSM(Variable Length Subnet Mask)——变长子网掩码

有效利用IP地址

- 分给用户使用的IP地址子网，其子网掩码较短，比如：172.16.10.0/24，存在254个可分配IP地址，可分配给用户主机使用
- 用于两路由器之间连接的子网，其子网掩码较长，比如：172.16.10.0/30，存在2个可分配IP地址，只需分给相连的两个路由器端口

![image-20230914222742507](https://img.yatjay.top/md/image-20230914222742507.png)

![image-20230914222800710](https://img.yatjay.top/md/image-20230914222800710.png)

## 无类域间路由CIDR

CIDR（无类域间路由，超网Classless Inter-Domain Routing)

路由聚合：很多个网络聚合成为一条路由

如下图所示，A路由器的路由表中存在4条路由记录，通过路由聚合之后传递给B的则只有1条路由记录

![image-20230914222943389](https://img.yatjay.top/md/image-20230914222943389.png)

B路由器的路由表可以是200.200.192.0/22，而不是像A那样显示4条路由

### 路由聚合方法

把几条近似路由写成二进制形式，观察那些二进制位完全一致，则从该二进制位处进行聚合

如上图中4条路由记录的二进制位，前22位完全一致，则4条记录可以聚合成为1条记录

再将聚合之后的二进制位写成点分十进制形式

![image-20230914223221647](https://img.yatjay.top/md/image-20230914223221647.png)

### 例题

![image-20230914223627463](https://img.yatjay.top/md/image-20230914223627463.png)

解析

![image-20230914223641511](https://img.yatjay.top/md/image-20230914223641511.png)

## 无类域间路由CIDR的作用

- 减小骨干路由器表项压力

- 缓解IP地址耗尽：划分子网在一定程度上缓解了因特网在发展中遇到的困难，但是**数量巨大的C类网**因为其**地址空间太小**并**没有得到充分使用**，而因特网的IP地址仍在加速消耗，整个**IPv4地址空间面临全部耗尽的威胁**。

![image-20230914223835146](https://img.yatjay.top/md/image-20230914223835146.png)
