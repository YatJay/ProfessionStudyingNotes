# 信道特性

## 数据通信简介

通信的目的就是**传递信息**。

通信中产生和发送信息的一端叫信源，接收信息的一端叫信宿，信源和信宿之间的通信线路称为信道。

**通信系统模型**，如下图所示

![image-20230213201125743](https://img.yatjay.top/md/image-20230213201125743.png)

其中，信源可以产生模拟信号或数字信号，信道分为模拟信道和数字信道，噪声即信号传输过程中的干扰

## 信道相关基础概念

### 信道带宽

| 信道类型 | 带宽定义                           | 公式            | 计量单位          |
| -------- | ---------------------------------- | --------------- | ----------------- |
| 模拟信道 | 信道能通过的最高频率与最低频率之差 | $W = f_2 - f_1$ | Hz（赫兹）        |
| 数字信道 | 信道能够达到的最大传输速率         | -               | bit/s（比特每秒） |

### 码元

定义：在使用时间域的波形表示数字信号时，**代表不同离散数值的基本波形称为码元**。一个数字脉冲称为一个码元(可以理解为一个时钟周期的信号称为一个码元)

简单来说，码元就是构成信号的一段波形。

![image-20230817221915558](https://img.yatjay.top/md/image-20230817221915558.png)

例如，这是一个调频信号，绿色这一段波形是构成该信号的一个基本波形，我们可称其为码元。它可以表示比特0，当然也可以表示比特1；蓝色这一段波形是构成该信号的另一个基本波形，也称为码元，它可以表示比特一，可见该信号由两种码元构成。

### 码元宽度

一个码元的时钟周期(T)称为码元宽度 

[频率的单位Hz意为 次/秒，周期的单位即为 秒/次]

### 码元速率(波特率)和数据传输速率(比特率)

| 概念                 | 定义                           | 计算公式          | 单位                     |
| -------------------- | ------------------------------ | ----------------- | ------------------------ |
| 码元速率(波特率)     | 单位时间内信道传送码元的个数   | $B = \frac{1}{T}$ | 波特(Baud) 或 (个码元/s) |
| 数据传输速率(比特率) | 每秒钟能够传输的二进制数据位数 | -                 | 比特/秒(bit/s、b/s、bps) |

总结对比：
- **码元速率(波特率)**关注的是单位时间传输的码元数量，与信号的调制方式相关，每个码元可以携带一个或多个比特的信息。
- **数据传输速率(比特率)**直接反映了实际数据传输速度，即每秒传输的比特数，是衡量数据通信系统性能的重要指标。在多电平调制或编码技术中，比特率可能大于波特率，因为每个码元可以代表多个比特。

### 码元种类数与携带信息量的关系

一个码元(一个包裹)携带的信息量n(位)与码元种类数(N)的关系是
$$
n = log_2N
$$

如下表所示说明码元种类数与携带信息量的关系

| 码元种类数(N) | 码元种类详细                                      | 携带信息量(每个码元能携带几位数据)(n) |
| ------------- | ------------------------------------------------- | ------------------------------------- |
| 2             | 0、1共计2类码元                                   | 1(即每个码元携带1位信息)              |
| 4             | 00、01、10、11共计4类码元                         | 2(即每个码元携带2位信息)              |
| 8             | 000、001、010、011、100、101、110、111共计8类码元 | 3(即每个码元携带3位信息)              |

### 噪声信道分贝与信噪比关系

S/N为信噪比，其中S为信号平均功率，N为噪声平均功率。

信噪比S/N是一个参数，一般不会分别给出S和N，而是需要根据分贝dB来求信噪比S/N

我们有**分贝与信噪比的关系**为

$$
dB = 10 log_{10}\frac{S}{N} = 10 lg \frac{S}{N}
$$

那么容易得出**信噪比与分贝的关系**为
$$
\frac{S}{N} =10^ {\frac{dB}{10}}
$$

## 重要定理(高频考点)

### 尼奎斯特定理和香农定理

| 定理名称     | 描述                                       | 条件               | 结论                                                         | 公式                                 | 数据速率                                | 单位               |
| ------------ | ------------------------------------------ | ------------------ | ------------------------------------------------------------ | ------------------------------------ | --------------------------------------- | :----------------- |
| 尼奎斯特定理 | 无噪声环境下最大码元速率与信道带宽关系     | 理想无噪声信道     | 若信道带宽为W，则最大码元速率为2W，最大数据速率亦可推得      | $B_{max} = 2W$                       | $R = B_{max} \cdot n = 2W \cdot log_2N$ | 波特(Baud) / bit/s |
| 香农定理     | 噪声信道下的极限数据速率与带宽、信噪比关系 | 含有噪声的实际信道 | 若信道带宽为W，信噪比为S/N，则该噪声信道的极限数据速率满足右侧公式 | $C = W \cdot log_2(1 + \frac{S}{N})$ | $ C = W \cdot log_2(1+\frac{S}{N})$     | bit/s              |

#### 定理相关物理量解读

| 表示 | 含义                                                         | 单位                                                         |
| ---- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| B    | 码元速率                                                     | 波特(Baud) 或 (个码元/s)                                     |
| W    | 信道带宽                                                     | Hz(模拟信道：最高频率与最低频率之差)<br/>bit/s(数字信道：最大传输速率) |
| R    | 理想信道最大数据速率                                         | bit/s                                                        |
| n    | 每个码元携带信息量(位)                                       | bit                                                          |
| N    | 码元种类数                                                   | 个                                                           |
| C    | 噪声信道的极限数据速率                                       | bit/s                                                        |
| S/N  | 信噪比(信噪比S/N是一个参数，一般不会分别给出)，一般需要根据分贝dB来求信噪比S/N | -                                                            |

总结对比：

- **尼奎斯特定理**适用于理想无噪声条件下，给出了在这样的条件下最大可能的码元传输速率及对应的数据传输速率，强调了带宽对数据传输能力的理论上限。
- **香农定理**则考虑了实际通信中存在噪声的情况，指出在给定信道带宽和信噪比条件下，理论上可达到的最大数据传输速率，更加符合真实世界的通信场景。
- 分贝与信噪比的转换关系帮助我们更直观地理解和比较不同通信系统中的信号质量，分贝(db)作为一种对数单位，使得大范围的信噪比变化可以用较小的数值差异表示。

### 带宽/码元速率/数据速率的关系梳理

![image-20230213210600556](https://img.yatjay.top/md/image-20230213210600556.png)

注意：调制技术影响码元种类数N，如

- 4ASK即是说N = 4
- 2PSK即是说N = 2

## 两个重要定理使用提问

![image-20230213210837986](https://img.yatjay.top/md/image-20230213210837986.png)

解析：

- 电话信道为模拟信道：$W = f_2-f_1 = 4kHz$

- 求几个信号状态即求码元种类数N，**至少需要的信号状态(边界条件)即假设为理想信道没有噪声**
- **即令极限数据速率R = C即R = 2W * log<sub>2</sub>N = 40kb/s解得N = 32**

## 误码率

误码率是衡量数据通信系统在正常工作情况下**传输可靠性**的指标。

定义：传输**出错的码元数**占**传输总码元数**的比例，误码率越小，通信可靠性越高。

计算：
$$
Pe=\frac{Ne}{N}
$$
其中Ne表示出错数，N表示传送总数

计算机通信网络中，**误码率一般要求低于10<sup>-6</sup>**，即传输一百万个最多只能有一个出错

## 信道延迟(中频考点)

| 类别         | 定义                                                         | 计算公式                  | 备注                                    |
| ------------ | ------------------------------------------------------------ | ------------------------- | --------------------------------------- |
| **信道延迟** | 数据从源端传输到宿端所需总时间，受传输距离和传输过程影响     | **线路延迟 + 调制延迟**   |                                         |
| **线路延迟** | 数据在物理线路中传输所花费的时间，与距离和介质传输速度相关   | **传输距离 / 传输速度**   | 路上跑的时间                            |
| **调制延迟** | 数据打包、编码等准备过程所需时间，取决于数据帧大小和传输速率 | **数据帧大小 / 传输速率** | 排队上车时间(**只计算1次**，下车不排队) |

### 常用介质传输速度

| 介质               | 传播速度                                    |
| ------------------ | ------------------------------------------- |
| **光速**           | **30 0000 km/s** = 300m/μs                  |
| **电缆中传播速度** | **20 0000 km/s** = 200m/μs(一般为光速的77%) |

### 常用介质时延

| 介质              | 传输距离       | 大概时延          |
| ----------------- | -------------- | ----------------- |
| **500米同轴电缆** | 500米          | **2.5μs**         |
| **卫星信道**      | 含来回双向距离 | **270ms**（双向） |

备注：卫星信道的延迟说明中已经包含了来回双向的总延迟。

### 计算例题示例

![image-20230213223741070](https://img.yatjay.top/md/image-20230213223741070.png)

注意：**通信领域中Kb/s = 1000 b/s，存储领域中使用1024进制转换**

# 数据编码

常用编码方案：重点是**曼彻斯特编码**和**差分曼彻斯特编码**，历年考察最多

根据提供的信息，我为您总结了几种编码方式的主要特点，并以表格形式展示如下：

### 单极性码和双极性码

| 编码方式           | 特点                                                         | 适用场景       | 优点                         | 缺点                                     | 示例                                                         |
| ------------------ | ------------------------------------------------------------ | -------------- | ---------------------------- | ---------------------------------------- | ------------------------------------------------------------ |
| 单极性码           | 使用一种极性表示数据，如正电压代表“1”，零电压代表“0”         | 简单系统       | 实现简单                     | 电平相差较小，抗干扰能力差，易受噪声影响 | ![image-20230214194309697](https://img.yatjay.top/md/image-20230214194309697.png) |
| 双极性码           | 使用正负电压分别表示“1”和“0”，电平相差大，抗干扰强           | 大多数通信系统 | 点评相差较大，抗干扰能力强   | 电路实现相对复杂                         | ![image-20230214194318832](https://img.yatjay.top/md/image-20230214194318832.png) |
| 交替反转编码 (AMI) | 双极性码的一种，**0电平表示0，1则在正负之间交替翻转。1跳0不跳，下一个“1”和上一个“1”交替反转** | 电话线传输     | 减少直流成分，利于长距离传输 | 会产生直流漂移                           | ![image-20230214194522779](https://img.yatjay.top/md/image-20230214194522779.png) |

### 归零码和不归零码

| 编码方式       | 特点                                                | 适用场景           | 优点                   | 缺点             | 示例                                                         |
| -------------- | --------------------------------------------------- | ------------------ | ---------------------- | ---------------- | ------------------------------------------------------------ |
| 归零码 (RZ)    | 码元中间的信号回归到零电平，每个码元都要回归到0电平 | 早期通信系统       | 易于同步               | 带宽效率低       | 从负电平到零电平的转换边表示码元“1”，从正电平到零电平的转换边表示码元“0"（笔者注：极性选择了单极性，因此本例为单极性归零编码）<br/>![image-20230214202951496](https://img.yatjay.top/md/image-20230214202951496.png) |
| 不归零码 (NRZ) | **在整个码元时间内，电平不会出现0电平**。           | 广泛应用于数据通信 | 实现简单，带宽效率较高 | 需要外部时钟同步 | 采用不归零编码产生的该比特流的相应信号，正电平表示比特1，负电平表示比特0。(从极性角度来说，下图是一个双极性不归零码)<br/>![image-20230817222657973](https://img.yatjay.top/md/image-20230817222657973.png) |

### 极性/是否归零小结

- 单极性和双极性描述的是使用几种极性的电压或电流来进行数据编码

  - 单极性：仅使用一种极性的电压或电流来表示数据

  - 双极性：使用两种相反的电压极性来表示二进制信息

- 不归零和归零引入了电平的**变化过程**来进行编码，不归零和归零描述的是在码元时间内，电平会不会出现0电平
  - 归零编码：要求每个码元期间信号至少有一次返回到零电平。
  - 不归零编码：是指信号在整个码元期间维持不变，直到下一个码元开始时才可能发生变化。

因此，极性选择和是否归零是编码方式的2个不同角度的选项，可以组合使用

- **单极性归零码**：在逻辑"1"的表示期间，信号上升到某个正值然后归零；而在逻辑"0"期间，信号保持在零电平。
- **双极性归零码**：类似于单极性归零码，但在双极性归零码中，逻辑"1"可能表现为正脉冲至零电平，而逻辑"0"表现为负脉冲至零电平。
- **单极性不归零码**：在逻辑"1"时，信号保持恒定的正值（比如正电压或正电流），而在逻辑"0"时，信号为零电平（零电压或无电流）。
- **双极性不归零码**：逻辑"1"时信号为正极性，逻辑"0"时信号为负极性，两种状态均持续整个码元宽度，不回零。

### ==差分码和双相码==















### ==曼彻斯特编码和差分曼彻斯特编码==

| 编码方式           | 特点                                                         | 适用场景           | 优点                         | 缺点                                     |
| ------------------ | ------------------------------------------------------------ | ------------------ | ---------------------------- | ---------------------------------------- |
| 曼彻斯特编码       | 每个码元中间有跳变，“高-低”表示“0”，“低-高”表示“1”           | 以太网早期标准     | 自同步，抗干扰               | 带宽效率50%                              |
| 差分曼彻斯特编码   | 每个码元周期中间有固定跳变，码元开始处有无跳变区分“0”和“1”   | 令牌环网络         | 自同步，抗干扰               | 带宽效率50%                              |



### mB/nB编码

| 编码方式    | 特点                                                         | 适用场景   | 优点                       | 缺点                     |
| ----------- | ------------------------------------------------------------ | ---------- | -------------------------- | ------------------------ |
| 4B/5B编码   | 每4位数据编码为5位，增加同步信息(发送数据流每**4bits进行一个分组**，先使用不归零码（NRZ-I），**编码成5bit**，多出一位用于解决同步问题，编码效率为**4/5 = 80%**) | 百兆以太网 | 提高同步效率，编码效率80%  | 相对于原始数据增加了开销 |
| 8B/10B编码  | 类似4B/5B，每8位数据编码为10位                               | 千兆以太网 | 同步效率高，能平衡直流成分 | 开销增加                 |
| 64B/66B编码 | 高效编码，每64位数据编码为66位，适用于高速网络               | 万兆以太网 | 高编码效率97%              | 设计复杂度高             |

此表格概述了每种编码方式的基本特点、它们的典型应用场景、主要优势以及潜在的不足之处，有助于理解不同编码方式的适用性和限制。

# 调制技术

## 调制和解调

调制和解调是通信系统中不可或缺的两个过程，它们共同确保了数字信息能够在模拟媒介中有效且可靠地传输和接收。调制过程通常涉及对数字信号的某种编码，使其能够嵌入到载波信号中，而解调则是逆过程，从携带数据的模拟信号中恢复原始数据。

| 过程     | 定义                             | 目的                                                         |
| -------- | -------------------------------- | ------------------------------------------------------------ |
| **调制** | 将**数字**信号转换成**模拟**信号 | 使数字信号适应模拟信道传输，提高信号的抗干扰能力和传输效率，便于远距离传输。 |
| **解调** | 将**模拟**信号转换为**数字**信号 | 在接收端，从模拟信号中还原出原始的数字信号，以便后续的处理和信息提取。 |

## 调制方式简介

| 调制方式          | 特点           | 相关描述                                                     |
| :---------------- | -------------- | ------------------------------------------------------------ |
| 幅度键控(ASK)     | 振幅变化       | 利用载波的两个不同**振幅**表示数字信号的0和1                 |
| 频移键控(FSK)     | 频率变化       | 通过载波的两个不同**频率**来区分数字信号的0和1               |
| 相移键控(PSK)     | 相位变化       | 利用载波的**起始相位**变化来表示0和1                         |
| 正交幅度调制(QAM) | 幅度与相位结合 | 把**两个幅度相同但相位差90°**的模拟信号合成一个模拟信号(用于5G、WiFi) |

#### 特殊相位调制说明

| 调制方式 | 全称                                          | 调制方式 | N(码元种类数) | 描述                                                         |
| -------- | --------------------------------------------- | -------- | ------------- | ------------------------------------------------------------ |
| DPSK     | Differential Phase Shift Keying，差分相移键控 | 2相调制  | 2             | 每个码元只取两个相位值，代表差分相移键控，基于前后码元相位差来判断数据 |
| QPSK     | Quadrature Phase Shift Keying，正交相移键控   | 4相调制  | 4             | 每个码元可取四个相位值，代表正交相移键控，四个相位状态等距分布，实现更高数据密度传输 |

## ==本节提问DPSK(常考)==

![image-20230221212231978](https://img.yatjay.top/md/image-20230221212231978.png)

解析：

- PSK相移键控：用载波的**起始相位**的变化表示0和1(初相位不同)——类似于曼彻斯特编码

- 假设上图为PSK，若第一个周期波形表示1，则第4个周期波形应当与第一个周期相同，但图中显然不同，假设不成立——其情形实际满足“差分”的概念
  - **DPSK差分相移键控**：与上一个波形比较形状，有变化表示0，无变化表示1——类似于差分曼彻斯特编码
  - **差分曼彻斯特**：与上一个时钟周期比较起始位，有变化表示0，无变化表示1

# 解调技术

本节取自2-7 脉码调制技术，该技术是一种解调技术

解调：把模拟信号转换为数字信号的过程

常用的解调技术就是**脉冲编码调制技术**(Pulse Code Modulation,**PCM**）,简称**脉码调制**

PCM**脉冲编码调制技术**(Pulse Code Modulation,**PCM**）数字化过程3个步骤(记住)：

1. **采样**
2. **量化**
3. **编码**

![image-20240505141902056](https://img.yatjay.top/md/image-20240505141902056.png)

| 步骤 | 原理                                                         | 说明                                                         | 效果影响                                                     | 实例                                                         |
| ---- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 采样 | 按照一定的时间间隔对模拟信号进行取样，把模拟信号的当前值作为样本。 | 每隔一段时间，对模拟信号抽取一个观测值，把模拟信号的当前值作为样本。 | 采样频率：每秒钟采样的次数称为采样频率，可以理解为采样点的密度。<br/>采样频率越高越好，即采样点的密度越高，还原模拟信号的效果越好 | 如CD格式采样频率为44.1KHz，即每1s种的音乐，就包含44100个采样点。 |
| 量化 | 把取样后得到的样本**由连续值转换为离散值**，**离散值的个数(即码元种类数)**决定了量化的精度 | 负责记录纵轴的振幅即响度信息，每段声音都有强有弱，最前和最弱之间的差值称为动态范围，单位为分贝。量化就是将动态范围划分为相等的层次，然后把采样点的音量大小，归入最近的量值。 | 量化越细越好，量化的精细程度称为“位深度”单位bit<br/>如位深度2bit，可以将动态范围划分为2^2 = 4层，每个采样点音量大小最多就有4种情况 | 电话通话的位深度较低，较为粗糙；CD格式位深度能到16bit，细腻得多 |
| 编码 | 把量化后的样本值变成相应的二进制代码，可以得到相应的二进制代码序列，其中每个二进制代码都可以用一个脉冲串来表示，这一组脉冲序列就代表了经PCM编码的模拟信号 | 经过采样和量化，就能得到每个离散点的量值，将这些量值用0和1记录下来的过程，就是编码 | -                                                            | -                                                            |

## 尼奎斯特采样定理

**奈奎斯特采样定理**：如果模拟信号的最高频率为f<sub>max</sub>，若以大于2f<sub>max</sub>的采样频率对其进行采样，则采样得到的离散信号序列就能完整地恢复出原始信号。(即**采样频率应当大于等于模拟信号最高频率的2倍**)
$$
f = \frac{1}{T} \geq 2f_{max}
$$

例如，模拟信号频率为3~10Mhz，则采样频率应当大于等于10Mhz

## PCM脉码调制示例

| 步骤 | 说明                                                         | 图示                                                         |
| ---- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 采样 | 如图所示，对于一个模拟信号，按照一定的时间间隔进行取样，得到的当前值即为样本，根据尼奎斯特采样定理，采样所用时间间隔 T ≤ 1/2fmax | ![image-20230221215101056](https://img.yatjay.top/md/image-20230221215101056.png) |
| 量化 | 如图，把**量化等级分为8级(即码元种类数)**                    | ![image-20230221215111520](https://img.yatjay.top/md/image-20230221215111520.png) |
| 编码 | 如图，用000-111这8个二进制数分别代表不同的电平幅度           | 如上图所示                                                   |

## PCM脉码调制应用实例——声音信号的数字化

| 步骤 | 方法                                                         | 计算                                                         |
| ---- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 采样 | 对声音信号数字化时，由于语音最高频率是4kHz，所以取样频率至少是8kHz | 即每秒钟采样8000次，码元速率为8000Baud。笔者注：<font color=red>可理解为：码元速率 = 采样频率</font> |
| 量化 | 对语音样本用128个等级量化                                    | 128种码元，N = 128                                           |
| 编码 | 每个样本用7bit表示                                           | 一个码元(一个包裹)携带的信息量n(位)与码元种类数(N)的关系是n = log<sub>2</sub>N = 7 |

因此，在数字信道上传输这种数字化后的语音信号的速率（理想速率）是：**R =B * n  = 8000*7=56 Kbps**

## 本节提问

![image-20230221220234102](https://img.yatjay.top/md/image-20230221220234102.png)

解析：B = f = 1/T = 8000Hz，数据速率 = B * n = B * log<sub>2</sub>N = 64Kb/s，

注意：此题未按照尼奎斯特采样定理进行采样，采样频率小于信道带宽的2倍，计算时按照题目的采样周期计算采样频率，而不是直接带入尼奎斯特采样定理计算采样频率

# 差错控制

## 差错控制简介

### 差错控制原理

**原理**：在数据传输前，通过特定算法向原始数据添加`r`位冗余信息，使得接收方能够基于这些额外信息检测或纠正错误。

### 差错控制的方法对比

| 差错控制方法 | 定义与特点                                                   | 方法示例     |
| ------------ | ------------------------------------------------------------ | ------------ |
| **检错**     | - 接收方能够检测到数据传输中的错误，但无法确定错误的具体位置或内容。<br>- 需要请求发送方重新发送数据包。 | 奇偶校验/CRC |
| **纠错**     | - 接收方不仅能检测到数据错误，还能确定错误的位置并予以纠正，无需重新发送数据。<br>- 实现较为复杂，通常需要更多的冗余信息。 | 海明码       |

## 奇偶校验

原理：在7位ASCII码后**增加一位**，**使得**码字中1的个数成奇数（奇校验）或偶数（偶校验)。奇偶校验是最常用的检错方法，能检出**一位错位**。

### 奇偶校验原理及示例

| 校验类型   | 定义                                                        | 示例                                                         |
| ---------- | ----------------------------------------------------------- | ------------------------------------------------------------ |
| **奇校验** | 在数据位之后添加一位校验位，确保整个码字中“1”的个数为奇数。 | 原始数据：101101<br>添加校验位后：101101**1**（确保总共有3个'1'，奇数个） |
| **偶校验** | 在数据位之后添加一位校验位，确保整个码字中“1”的个数为偶数。 | 原始数据：101101<br>添加校验位后：101101**0**（保持总共有2个'1'，偶数个） |

注意：

- 奇偶校验只能检测出一位错误，如果数据中有两位或以上出错，校验将会失效，因为错误位数的改变可能未影响到“1”的奇偶性。
- 奇偶校验不能确定错误发生的具体位置，仅能告知接收方数据有误。
- 这种方法简单且效率高，适用于对实时性要求较高但对数据完整度要求不那么严格的通信系统中。

## CRC循环冗余校验码







## 海明码