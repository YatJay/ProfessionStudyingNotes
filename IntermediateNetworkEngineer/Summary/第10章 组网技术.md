交换机路由器的配置在第6章以及配置手册，本章节主要目的是应对上午的选择题，下午*大题详细见第6章以及配置手册*

# 交换机基础

## 交换机的分类

### 根据交换方式划分

| 类型           | 定义                                                         | 优点                                                         | 缺点                             |
| -------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | -------------------------------- |
| 存储转发式交换 | 接收完整数据帧，先进行缓存、校验、碎片过滤，然后转发——**当前使用最多**，一般使用专门的**硬件ASIC交换芯**片实现(路由可以使用软件实现)——**硬交换软路由，交换的速度比软件的路由要快** | 可以提供差错校验和非对称交换(即接收端口和发送端口可以带宽不同，因为做了缓存，不怕丢) | 延迟大，因为交换机要做很多处理   |
| 直通式交换     | 输入端口扫描到目标地址后立即开始转发，**不做缓存，不做验证**，与存储转发式恰好相反 | 延迟小、交换速度快                                           | 没有检错能力，不能实现非对称交换 |
| 碎片过滤式交换 | 开始转发前先检查数据包的长度是否够**64个字节**(根据规定，以太网帧固定格式必然大于等于64字节)，如果小于64个字节，说明是冲突碎片，则丢弃；如果大于等于64个字节，则转发该数据帧 | -                                                            | -                                |

### 根据交换的协议划分

| 类型       | 定义                                                      | 特点                                                         | 备注                                                         |
| ---------- | --------------------------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 二层交换机 | 默认类型的交换机，主要工作在OSI模型的第二层（数据链路层） | 基于MAC地址转发数据，用于连接同一局域网内的设备，支持VLAN划分但不能直接跨VLAN通信 | 广泛应用于网络接入层和汇聚层，所有网络设备厂商均提供         |
| 三层交换机 | 集成了路由功能的交换机，工作在第三层（网络层）            | 除了具备二层交换功能，还能基于IP地址进行路由选择，实现不同VLAN间的通信，可配置多VLAN的IP地址作为网关 | 适用于网络的核心层或某些汇聚层，华为、锐捷、华三、迪普等均有产品 |
| 多层交换机 | 通过插入不同功能板卡扩展更多网络服务的交换机              | 可以通过添加防火墙板卡、负载均衡(LB)板卡、入侵防御系统(IPS)板卡等，实现安全、优化和监控等功能 | 华三、迪普等厂商主推此类多功能集成交换机<br/>华为、锐捷等也有相应产品，但可能不是市场推广的重点 |

### 根据交换机的结构划分

| 分类           | 描述                                               | 特点                                                         |
| -------------- | -------------------------------------------------- | ------------------------------------------------------------ |
| 固定端口交换机 | 具有固定数量端口，通常用于网络的接入层             | - 端口数量固定，如常见的24口、48口<br>- 一般适用于网络的接入层<br/>- 通常包含24或48个下行电口连接终端，以及额外的上行光口<br>- 结构紧凑，成本较低，适用于基本网络需求 |
| 模块化交换机   | 提供可插拔的接口模块，可根据需要扩展端口类型和数量 | - 端口配置高度灵活，可通过插入不同模块增加万兆光口、千兆电口等<br>- 适用于网络的核心层或大型汇聚层<br>- 支持热插拔，易于维护和升级<br>- 成本相对较高，但扩展性和适应性强 |

**注意**：24口接入交换机上具有24+4口，常见24电口+4光口。常说的24口交换机指下行连接终端的接口有24个，即有24个**下行接用户的端口**（一般为电口），用来连接终端如计算机、摄像头等；此外，24口交换机还有**4个上行接口**(一般为光口)。48口交换机上具有48+8口，结构与上述类似。

### 根据配置方式划分

| 配置方式     | 定义                                                         | 特点                                                         |
| ------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 堆叠交换机   | 支持通过特定技术将多台交换机通过**虚拟化技术**虚拟成一台逻辑交换机，，如华为CSS、华为ISTACK、华三IRF、锐捷VSU、思科VSS | - 扩展端口密度和提升交换能力<br>- 统一管理和配置，简化网络运维<br>- 高可用性，主备切换减少单点故障影响<br>- 需要专用堆叠线缆和厂商支持<br>- 可能存在兼容性限制 |
| 非堆叠交换机 | 不支持堆叠功能，扩展端口需通过级联等方式                     | - 独立配置和管理每台交换机<br>- 扩展灵活，无需专用堆叠技术<br>- 适用于小型网络或对性能、管理要求不高的场景<br>- 可能导致网络架构复杂，管理难度大 |

### 根据管理类型划分

| 管理类型     | 定义                                                  | 特点                                                         |
| ------------ | ----------------------------------------------------- | ------------------------------------------------------------ |
| 网管交换机   | 支持网络管理功能，可通过多种方式配置和监控            | - 支持SNMP、CLI、Web界面等管理方式<br>- 可监控网络状态，配置VLAN、QoS等高级功能<br>- 适合企业级应用，便于故障排查和网络优化<br>- 成本相对较高 |
| 非网管交换机 | 不支持网络管理功能，即插即用                          | - 价格低廉，操作简单<br>- 功能简单，仅进行基本的信号转发<br>- 适用于家庭、小型办公室等对网络管理要求不高的环境<br>- 无法进行高级配置或监控网络状态 |
| 智能交换机   | 过渡概念，类似于网管交换机但提及较少，强调web管理能力 | - 通常指具备基础网络管理功能，特别强调Web界面配置便利性<br>- 功能可能较网管交换机简化，但仍提供一定可配置性<br>- 现多被纳入网管交换机范畴，区别逐渐模糊 |

### 根据层次结构划分(重要)

| 层级         | 定义                                                       | 特点                                                         |
| ------------ | ---------------------------------------------------------- | ------------------------------------------------------------ |
| 核心层交换机 | 网络架构的中心，负责连接各汇聚层设备，处理大量数据传输     | - 高速、高性能，支持高带宽和低延迟<br>- 高可靠性，通常采用冗余设计<br>- 负责整个网络的关键路由和快速数据转发<br>- 部署位置为核心机房，数量较少 |
| 汇聚层交换机 | 位于接入层和核心层之间，负责局部区域的数据聚合和传输控制   | - 中转流量，可能执行VLAN间路由、访问控制等策略<br>- 相对于核心层交换机，性能稍低，但依然需要较高的带宽和处理能力<br>- 根据网络规模，每栋楼或区域部署1至数台 |
| 接入层交换机 | 网络的边缘，直接与用户终端设备相连，如PC、打印机、IP电话等 | - 数量最多，分布最广，每个楼层或区域都有<br>- 主要功能是接入控制，包括端口安全、VLAN分配等<br>- 性能要求相对较低，更注重成本效益和易于管理 |

## 交换机的性能参数

| 性能参数  | 定义                                                         | 说明                                                         |
| --------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 端口类型  | 包括RJ45电口、光口(如SC、GBIC、SFP、SFP+、SFP28)             | 决定了连接类型和传输距离                                     |
| 传输模式  | 半双工、全双工                                               | 全双工提供双向同时传输，提高数据传输效率                     |
| 交换容量  | 是指**交换机接口处理器或接口卡**和**数据总线间所能吞吐的最大数据量**。 交换容量表明了交换机总的数据交换能力，单位是Gbps | 计算公式：端口数 * 端口速率 * 2；衡量交换机整体处理能力      |
| 包转发率  | 单位时间内转发64字节数据包的数量，单位Mpps                   | 如千兆口典型值1.488Mpps；衡量交换机实际数据包处理速度        |
| MAC地址数 | 交换机MAC地址表可存储的最大MAC地址数                         | 影响接入终端的数量，过少会导致部分用户无法接入网络；<br/>有一种攻击就叫MAC地址泛洪攻击，使用一台终端模拟大量MAC地址的数据帧 |
| VLAN表项  | 最大支持VLAN数量                                             | 通常为**4094个即4K**，满足多数场景的VLAN隔离和管理需求       |

### 示例计算

**48千兆电口+4千兆光口全双工交换机**

| **示例计算** | 说明                                                         |备注|
| ------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 交换容量计算 | (48 \* 1Gbps + 4 \* 1Gbps) * 2 = 104Gbps                     | 一个48千兆电口+4千兆光口的全双工(乘以2)交换机的交换容量：(48\*1Gbps+4\*1Gbps)\*2 = 104Gbps(厂商一般会虚标该值)，即就是说：当交换容量达到104Gbps时，该交换机可以实现线速转发 |
| 包转发率计算 | (48 + 4) * 1.488Mpps = 74.784Mpps                            | - 如一个千兆接口的包转发率为**1.488Mpps**(可以不会计算，知道这个结果数字就行；注意单位为Mpps即M pakages per second)<br/>- 1000Mbps/8/(64+8+12)=**1.488Mpps**<br/>- 则本例交换机的包转发率：(48+4)\*1.488Mbps    (厂商一般会虚标) |

# 路由器管理

## 路由器的接口

- 以下接口都是**运营商甩给单位**的，连接在单位的以太网出口路由器上面。

- 理论上路由器每个接口都有一个三层的IP地址，而且在不同的网段

### 根据连接网络分类

| 接口类型 | 定义       | 特点                                                         |
| -------- | ---------- | ------------------------------------------------------------ |
| WAN口    | 广域网接口 | - 用于连接外部网络，如互联网服务提供商(ISP)提供的宽带线缆<br>- 实现局域网与广域网的数据传输<br>- 可能支持ADSL、VDSL、光纤等多种连接方式<br>- 通常只有一个，用于上行数据 |
| LAN口    | 局域网接口 | - 用于连接内部网络的设备，如电脑、打印机、网络摄像头等<br>- 提供局域网内部的数据交换<br>- 数量较多，常见有4、8、16、24个端口<br>- 通常使用RJ45接口，支持以太网连接<br>- 用于下行数据传输，速率通常与路由器规格匹配，如100Mbps、1Gbps、10Gbps |

### 根据物理形态分类

| 物理形态             | 定义                                                         | 应用场景                                             | 当前状态                             |                                                              |
| -------------------- | ------------------------------------------------------------ | ---------------------------------------------------- | ------------------------------------ | ------------------------------------------------------------ |
| RJ45端口             | 常规以太网电口                                               | 最广泛使用的网络接口，连接电脑、路由器、交换机等设备 | 普遍使用                             | ![20200720112159290](https://img.yatjay.top/md/20200720112159290.png) |
| 以太网光口           | SC/GBIC/SFP/SPF+/SFP28                                       | 高速、远距离数据传输，适用于数据中心、企业骨干网等   | 广泛应用于现代网络                   |                                                              |
| AUI端口              | 用于令牌环或总线型以太网接口                                 | 已淘汰，不再常见                                     | 过时，不再使用                       |                                                              |
| **Serial串口**       | **用于连接DDN、<font color = red>帧中继</font>、X.25、PSTN等网络**(会考察) | 已极少使用，被IP/以太网技术取代                      | 过时，仅在某些特定老旧系统中保留     | ![image-20230313211858513](https://img.yatjay.top/md/image-20230313211858513.png) |
| **ISDN BRI/PRI端口** | **ISDN线路互联(会考察)<br/>- BRI速率为144Kbps<br/>- PRI速率为2.048Mbps** | 早期远程访问和电话系统使用，已逐步被淘汰             | 过渡期技术，部分地区可能仍有遗留应用 |                                                              |
| SDH技术 POS接口      | 公安、金融行业使用，速率155M/622M/2.5G/10G等<br/>(看到前面这些数字，表明是SDH技术的POS接口) | 高速数据传输，适用于需要极高稳定性和可靠性的专网环境 | 在特定行业领域仍有应用               |                                                              |

注：

- 电口和光口

![](https://img.yatjay.top/md/20200720112159290.png)

- Serial串口

![image-20230313211858513](https://img.yatjay.top/md/image-20230313211858513.png)

## 企业网络的架构

上述接口都是**运营商甩给单位**的，连接在单位的以太网出口路由器上面。不能直接连接交换机，交换机上都是只有RJ45端口和以太网光口，没有Serial、POS、ISDN等接口。

![image-20231001164334041](https://img.yatjay.top/md/image-20231001164334041.png)

## 交换机和路由器的区别

| 特性         | 交换机                                                       | 路由器                                                       |
| ------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **接口类型** | 大多为相同类型接口，如全是RJ45电口或光口，专用于局域网连接   | 接口类型多样，包括WAN口（连接广域网）、LAN口（连接局域网）等 |
| **NAT功能**  | 绝大多数交换机不具备网络地址转换(NAT)功能，专注于局域网内部数据转发 | 支持NAT功能，可将私有IP转换为公网IP，实现内外网通信          |
| **接口数量** | 接口数量通常较多，适合构建多设备的局域网络，单个接口成本相对低 | 接口数量相对较少，但包含WAN口用于上行，单个接口成本相对较高  |
| **主要功能** | 二层数据链路层工作，基于MAC地址转发数据帧，构建局域网连接    | 三层网络层工作，根据IP地址进行路由决策，实现不同网络间的通信 |
| **应用场景** | 适用于局域网内部数据交换，提高网络传输效率                   | 适用于连接不同网络，实现Internet接入及不同局域网之间的互联   |

## 交换机和路由器的管理方式

| 管理方式      | 描述                                                  | 适用设备       | 安全性              | 常用度   |
| ------------- | ----------------------------------------------------- | -------------- | ------------------- | -------- |
| Console接口   | 通过物理线缆连接终端进行配置，最基础且直接            | 交换机、路由器 | 高（物理层面）      | 非常常用 |
| AUX端口+Modem | 利用调制解调器进行远程管理，现已较少使用              | 路由器         | 中                  | 不常用   |
| Telnet        | 远程登录管理协议，明文传输，安全性较低                | 交换机、路由器 | 低                  | 较少使用 |
| SSH           | 安全外壳协议，加密传输，较Telnet更安全，推荐使用      | 交换机、路由器 | 高                  | 非常常用 |
| Web管理       | 通过浏览器Web访问设备IP进行配置，界面友好，路由器常用 | 路由器         | 中到高（依赖HTTPS） | 常用     |
| 网管软件      | 集中管理多设备，需配合SNMP等协议，适合大规模网络管理  | 交换机、路由器 | 高（取决于实施）    | 企业常用 |
