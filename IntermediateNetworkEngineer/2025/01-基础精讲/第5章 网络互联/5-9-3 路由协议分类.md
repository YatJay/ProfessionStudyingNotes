## 5-9 路由协议

### 5-9-3 路由协议分类

#### 路由协议分类

路由协议分类方式：

- 按<font color="red">距离矢量和链路状态</font>分类：距离矢量路由协议如RIP、BGP；链路状态路由协议如OSPF、IS-IS

- 按<font color="red">内部网关和外部网关</font>协议：内部网关协议如IGP，用于自治系统内部，常见RIP、OSPF、ISIS；外部网关协议EGP，用于自治系统之间，典型的是BGP

距离矢量路由协议一般基于<font color="red">Bellman-Ford算法</font>（即贝尔曼-福特算法），链路状态路由协议基于<font color="red">Dijkstra算法</font>（也叫<font color="red">SPF最短路径优先算法</font>）

距离矢量路由协议，路由器互相交换的是路由表；链路状态路由协议，路由器互相交换的是链路状态数据库

![image-20250302201204398](https://img.yatjay.top/md/20250302201204433.png)

| 分类依据               | 分类结果            | 典型协议        | 备注说明                                                     |
| ---------------------- | ------------------- | --------------- | ------------------------------------------------------------ |
| 距离矢量和链路状态     | 距离矢量路由协议    | RIP、BGP        | 基于Bellman-Ford算法，通过与邻居节点交换信息来计算路由，适用于小型网络或特定场景 |
|                        | 链路状态路由协议    | OSPF、IS-IS     | 基于Dijkstra算法（SPF算法），通过泛洪链路状态信息来构建拓扑图，适用于大型网络 |
| 内部网关和外部网关协议 | 内部网关协议（IGP） | RIP、OSPF、ISIS | 用于自治系统内部的路由选择，关注网络内部的拓扑结构和路由信息 |
|                        | 外部网关协议（EGP） | BGP             | 用于自治系统之间的路由选择，关注不同自治系统之间的路由策略和可达性信息 |

#### 例题

##### 例题1

![image-20250302201227111](https://img.yatjay.top/md/20250302201227151.png)

解析：

- C：路由协议是在路由器或其他三层设备之间传递路由信息的协议，跟主机没关系
- D：只有OSPF这类链路状态路由协议可以学到网络拓扑，距离矢量路由协议不能学习网络拓扑结构。如果没有C，可以选D。

##### 例题2

![image-20250302201239037](https://img.yatjay.top/md/20250302201239082.png)

解析：

- OSPF是数据链路状态路由协议，采用的SPF算法，即最小生成树算法(Dijkstar)，会把网络拓扑转变为最短路径优先树，然后从该树形结构中找出到达每一个网段的最短路由，并保证计算出的路由不会存在环路。
- SPF算法计算路由的依据是带宽，每条链路根据其带宽都有相应的开销(COST)。开销越小，带宽就越大，链路就越优

##### 例题3

![image-20250302201248005](https://img.yatjay.top/md/20250302201248038.png)

解析：距离向量路由协议也叫距离矢量路由协议，基于Bellman-Ford算法即贝尔曼-福特算法。
