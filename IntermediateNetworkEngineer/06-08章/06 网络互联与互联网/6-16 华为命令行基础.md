# 6-16 华为命令行基础

## 基本的命令结构

每条命令都有独特的格式或语法结构，并在相应的视图下进行配置

常规命令语法为关键字＋参数

![image-20231002174254959](./assets/image-20231002174254959.png)

## 命令视图

华为的命令行视图有三类

- 用户视图：\<Huawei\>，可以查看一些简单运行状态和统计信息，主要是看

- 系统视图：\[Huawei\]用户视图输入system-view之后可进入系统视图，系统视图之下，可以配置全局参数，或进入其他视图

- 其他各种视图

  - 用户接口视图：配置远程登录方式及登录用户名密码，可以配置通过SSH登录还是Telnet登录

  - 接口视图：配置接口的IP地址等
  - ACL视图：配置ACL
  - VLAN视图：配置VLAN
  - 路由协议视图：配置OSPF协议等

![image-20231002174337699](./assets/image-20231002174337699.png)

## 实验

打开ensp，随便拉两台设备，连接2台设备，水平对齐，启动设备

![image-20231002205952222](./assets/image-20231002205952222.png)

### 切换系统视图

输入`sytem-view`，或`sy`，或`sy+tab`均可进入

![image-20231002205154675](./assets/image-20231002205154675.png)



### 进入用户接口视图

![image-20231002205402588](./assets/image-20231002205402588.png)

### 进入接口视图

用户视图下查看都有哪些接口`display int brief`

![image-20231002205535001](./assets/image-20231002205535001.png)

可以看到有许多接口如`Ethernet0/0/0`、`GigabitEthernet0/0/0`，当前我们拓扑连接的是两台路由器的GE0/0/0，因此可以看到该接口状态为up

切换至GE0/0/0接口：输入`interface GigabitEthernet0/0/0`，或`int g0/0/0`

![image-20231002211406094](./assets/image-20231002211406094.png)

为接口配置IP地址：`ip add 10.0.0.1 24`或`ip add 10.0.0.1 255.255.255.0`

![image-20231002231134436](./assets/image-20231002231134436.png)

取消为接口配置IP地址：`undo ip add 10.0.0.1 24`

![image-20231002231327171](./assets/image-20231002231327171.png)

查看接口IP信息：`dis ip int bri`即`display ip Interface brief`的缩写，简要显示当前接口的IP信息

![image-20231002231634887](./assets/image-20231002231634887.png)

### 进入acl视图

输入命令`acl 2000`进入acl配置，可以配置各种acl条目，以后详细讲解

![image-20231002231946056](./assets/image-20231002231946056.png)

### 进入VLAN视图

默认有一个VLAN 1

输入`vlan 10`可以创建一个名为`vlan10`的vlan，输入`vlan 20`可以创建一个名为`vlan20`的vlan

`dis vlan`显示所有的VLAN

![image-20231002232233400](./assets/image-20231002232233400.png)

## 常见命令及快捷键

![image-20231002232314063](./assets/image-20231002232314063.png)

`sysname`更改设备名称，即尖括号或方括号中的设备名称会变化

![image-20231003000348559](./assets/image-20231003000348559.png)

`?`显示帮助



`q`返回上一层



`display this`显示相关的命令



`display current-configuration`/查看当前的所有配置

![image-20231002233327737](./assets/image-20231002233327737.png)

`display  current-configuration|begin xxx`过滤显示出以……开始、包含……、不包含……

- begin：以……开始
- count
- exclude：不包含
- include：包含

![image-20231002233126395](./assets/image-20231002233126395.png)

`interface g0/0/0`进入配置某个接口：上述已经演示过

## 语法检查提示

![image-20231002233448957](./assets/image-20231002233448957.png)

## 配置标题消息与系统时钟

### 标题消息

标题消息即配置**远程登录**成功前后给用户的提示信息

![image-20231002233642443](./assets/image-20231002233642443.png)

配置标题消息

- 刚进入系统显示：`welcome to huawei`
- 登录成功后显示：`please don't reboot the device`

![image-20231002233731440](./assets/image-20231002233731440.png)

### 系统时钟

实际项目中需要保持所有的设备的时钟保持一致

![image-20231002233709747](./assets/image-20231002233709747.png)

配置系统时钟

![image-20231002233746165](./assets/image-20231002233746165.png)

## 常用快捷键总结

![image-20231002234107313](./assets/image-20231002234107313.png)

## 命令等级

华为将用户等级分为0-15个等级，3-15级用户的权限是一样的

- 0级用户：只能操作0级的命令，如一些查看命令，权限最低
- 1级用户：能操作0级和1级命令
- 2级用户：能操作0级、1级和2级命令
- 3-15级用户：能操作0级、1级、2级和3级命令，即可以操作所有命令，相当于Windows系统的管理员，Console口登录默认就是15级用户

![image-20231002234131996](./assets/image-20231002234131996.png)



![image-20231002234143463](./assets/image-20231002234143463.png)



![image-20231002234157250](./assets/image-20231002234157250.png)

## 用户界面与登录权限

在系统视图输入`user-interface`进入用户界面

![image-20231003001001897](./assets/image-20231003001001897.png)

用户界面主要有2种：console和vty，其他的不用管

- console：通过本地Console口登录，则用户界面类型为console；
- vty：可以理解为远程登录用户

![image-20231003000808009](./assets/image-20231003000808009.png)

配置用户权限、认证密码

![image-20231003000820288](./assets/image-20231003000820288.png)

为vty 0-4用户配置权限及登录密码

![image-20231003000830566](./assets/image-20231003000830566.png)



![image-20231003000838059](./assets/image-20231003000838059.png)

## 常用配置用户界面命令

![image-20231002234355062](./assets/image-20231002234355062.png)



![image-20231002234405037](./assets/image-20231002234405037.png)
