## 5-8 TCP和UDP协议

### 5-8-3 流量控制和拥塞控制

#### TCP流量控制

流量控制：为了<font color="red">防止发送方发送速度过快</font>，导致接收方处理不过来，造成丢包重传，浪费网络资源。

TCP流量控制机制：<font color="red">可变大小的滑动窗口</font>。在TCP报头中，窗口字段用来实现流控

![image-20250305192409752](https://img.yatjay.top/md/20250305192409786.png)

如下图所示

![image-20250305192522007](https://img.yatjay.top/md/20250305192522045.png)

根据图示的TCP滑动窗口协议工作原理：

1. **三次握手建立连接并初始化窗口**
  • 阶段①：A发送SYN(seq=100)协商初始序列号
  • 阶段②：B响应SYN-ACK(seq=200,ack=101)确认同步；并告诉A：我的接收缓冲区为3
  • 阶段③：A发送ACK(seq=101,ack=201)完成握手；并告诉B：我的接收缓冲区为x
2. **数据传输阶段**
   - 窗口大小决定在收到确认前可以发送的数据量：A发送数据102、103、104
   - B的CPU取走一个数据窗口+1，并通告A当前窗口大小为1
   - A继续发送数据105

##### 例题

###### 例题1

![image-20250305193834919](https://img.yatjay.top/md/20250305193834955.png)

###### 例题2

![image-20250305193851658](https://img.yatjay.top/md/20250305193851698.png)

#### TCP拥塞控制－慢开始与拥塞避免

![image-20250305193930673](https://img.yatjay.top/md/20250305193930712.png)