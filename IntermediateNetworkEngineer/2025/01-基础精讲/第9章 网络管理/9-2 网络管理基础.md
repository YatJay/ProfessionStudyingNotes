## 9-2 网络管理基础

### 网络管理功能域

网络管理五大功能域：<font color="red">故障管理、配置管理、、计费管理、性能管理和安全管理</font>。

助记：“**安配能计障**”(只考选择)

故障管理：**尽快发现故障，找出故障原因**，以便采取补救措施。

### 网络监控系统体系结构

网络监控系统主要有两个部分组成，分别是客户端和网管服务器，客户端有管理对象和相应代理功能，代理功能Agent负责采集管理对象的信息如CPU利用率、内存利用率、接口利用率等，管理对象可能是交换机，也可能是路由器；Agent采集到信息后，将该信息发送至网管服务器NMS。代理与监视器两种通信方式：<font color="red">轮询和事件报告</font>

- 轮询：由网管服务器定期轮询代理Agent，询问相应设备状态
- 事件报告：代理Agent发现异常事件，报告给网管服务器

![image-20250318211744786](https://img.yatjay.top/md/20250318211744830.png)

上图(a)为一般的网络监控系统结构，适用于小型网络，代理Agent和网管服务器直接通信；当网络中设备较多时，二者中间还要再加一层代理，而不是直接通信，如图(b)所示

### 轮询时间与管理设备数量

轮询是指由网管服务器定期轮询代理Agent，询问相应设备状态。轮询不等式：
$$
N≤T/Δ
$$


- N：被轮询的代理数量，一般每个设备有一个Agent
- T：轮询间隔，表示两次连续的全局轮询操作之间的时间长度。例如，若 *T*=10 秒，则网管服务器每10秒对所有代理进行一次完整的状态检查。轮询间隔越小，能够轮询的设备就越少
- Δ：单个轮询需要的时间，即轮询一个设备需要花多长时间

  - 其中Δ与下列因素有关：

    1. **管理站生成一个请求报文的时间。**

    2. **从管理站到代理的网络延迟**

    3. **代理处理一个请求报文的时间。**

    4. **代理产生一个响应报文的时间。**

    5. **从代理到管理站的网络延迟**

    6. **管理站处理一个响应报文的时间。**

    7. **为了得到需要的管理信息，交换请求/响应报文的数量。**


#### 公式理解

$N≤T/Δ$，其本质是确保在轮询间隔 *T* 内，网管服务器能够完成对所有代理（Agent）的状态检查，避免因超时导致数据更新延迟或遗漏。

公式 $N≤T/Δ$ 可变形为 $T≥N×Δ$，其含义为：**轮询间隔（T）必须至少覆盖所有代理的总轮询时间（N×Δ）**

轮询不等式的数学关系：不等式 $N≤T/Δ$ 表明，单次轮询时间（Δ）与代理数量（N）共同约束了轮询间隔（T）：

- Δ 的构成：包括请求发送、等待响应、数据处理等环节耗时。例如，若单个代理的轮询耗时 Δ=0.1 秒，则轮询100个代理需要至少 T=10 秒（即 T≥100×0.1）才能完成一轮完整轮询。

- 临界条件：
  - 当 $T=N×Δ$ 时，系统处于满负荷状态，无空闲时间；
  - 当 $T<N×Δ$时，则无法完成所有代理的轮询，导致数据遗漏
  - 当 $T≥N×Δ$时，能够完成所有代理的轮询，即$N≤T/Δ$

#### 例题解析

![image-20250318220420661](https://img.yatjay.top/md/20250318220420703.png)

![image-20250318220429040](https://img.yatjay.top/md/20250318220429071.png)

### 例题

#### 例题1

![image-20250318220545103](https://img.yatjay.top/md/20250318220545141.png)

#### 例题2

![image-20250318220551433](https://img.yatjay.top/md/20250318220551466.png)

解析：故障管理的目标：**尽快发现故障，找出故障原因**，以便采取补救措施。主要是检测故障，无法做到自动排除故障

#### 例题3

![image-20250318220600794](https://img.yatjay.top/md/20250318220600828.png)

### 网络管理协议五大标准

| **协议/标准**                              | **制定机构** | **主要技术特点**                                             | **典型应用场景**                                             |
| :----------------------------------------- | :----------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| <font color="red">**CMIS/CMIP**</font>     | ISO          | 基于OSI七层模型，提供面向连接的可靠传输，内置安全机制（访问控制、认证、安全日志），支持复杂管理操作（如事件主动上报） | 电信网络管理（如TMN）、需要高安全性的复杂系统管理            |
| <font color="red">**SNMPv1/v2/v3**</font>  | IETF         | - v1：基于团体名认证，简单请求/响应机制 <br/>- v2c：新增批量操作（GetBulk） <br/>- v3：用户级安全（USM/VACM） | 互联网设备监控（路由器、服务器）、企业局域网管理             |
| <font color="red">**RMON-1/RMON-2**</font> | IETF         | - RMON-1：监控MAC层流量（9个MIB组） <br/>- RMON-2：扩展至网络层/应用层（IP流量分析） | 交换网络流量分析、广域网性能监控、故障诊断                   |
| <font color="red">**CMOL**</font>          | IEEE         | CMIP在IEEE 802局域网中的实现，基于LLC子层的数据链路层协议    | 局域网设备管理（如交换机、路由器）                           |
| <font color="red">**TMN**</font>           | ITU-T        | 分层管理架构（业务层、网络层、单元层），集成CMIP协议，支持多厂商设备统一管理 | 电信运营商网络（SDH/SONET、ATM、GSM）、综合运维支撑系统（OSS） |

- ISO制定：<font color="red">CMIS/CMIP</font>公共管理信息服务规范。
- 基于TCP/IP：简单网络管理协议<font color="red">SNMPv1、SNMPv2、SNMPv3</font>。
- 基于局域网：远程监控网络<font color="red">RMON-1和RMON-2</font>。
- IEEE制定：基于物理层和数据链路层<font color="red">CMOL</font>。
- ITU-T：电信网络管理标准<font color="red">TMN</font>

>  引申：关于ISO、IETF、IEEE、ITU-T四个国际标准化组织的对比分析表
>
> | **维度**          | **ISO<br/>**(国际标准化组织)                                | **IETF**<br/>(互联网工程任务组)                            | **IEEE<br/>**(电气电子工程师学会)                            | **ITU-T**<br/>(国际电信联盟-电信标准分局)                    |
> | :---------------- | :---------------------------------------------------------- | :--------------------------------------------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
> | **成立时间**      | 1947年（前身可追溯至1926年的ISA）                           | 1986年（源自ARPANET研究组）                                | 1963年（由AIEE和IRE合并）                                    | 1993年（前身CCITT始于1865年）                                |
> | **组织性质**      | 非政府国际组织，167个成员国参与                             | 开放技术社区，无正式会员制（参与者以个人或机构身份加入）   | 非营利性专业协会，覆盖160+国家的40万+会员                    | 联合国下属机构，193个成员国政府参与                          |
> | **总部/管理架构** | 瑞士日内瓦，由全体大会、技术委员会（TC/SC）和中央秘书处构成 | 无固定总部，由ISOC提供法律支持，通过邮件组和全球会议运作   | 美国纽约，下设37个专业分会（如计算机、通信）和标准协会（IEEE-SA） | 瑞士日内瓦，分设ITU-T（标准化）、ITU-R（无线电）和ITU-D（发展） |
> | **核心领域**      | 全行业技术标准（如质量管理ISO 9000、信息安全ISO 27001）     | 互联网底层协议（TCP/IP、HTTP、DNS等）和应用层规范          | 电气电子工程（IEEE 802系列网络标准、航空航天技术）           | 全球电信标准（5G、光通信、多媒体编码）                       |
> | **标准制定流程**  | 六阶段制：提案→预备→委员会→审查→批准→发布（平均周期3-5年）  | 自下而上模式，通过RFC草案讨论→工作组共识→IESG审核          | 技术委员会提案→公开征询→投票表决（需75%支持率）              | 研究组（SG）提案→成员国协商→全会表决（每4年更新）            |
> | **典型成果**      | ISO 9001质量管理体系、ISO/IEC 27001信息安全标准             | RFC 791（IPv4）、RFC 2616（HTTP/1.1）、RFC 8446（TLS 1.3） | IEEE 802.11（Wi-Fi）、IEEE 802.3（以太网）、IEEE 754（浮点数运算） | G.652光纤标准、H.265视频编码、IMT-2020（5G）                 |
> | **协作特点**      | 与IEC联合制定跨领域标准（如ISO/IEC JTC1信息技术标准）       | 与W3C、ICANN等互联网组织协同，强调代码实现验证             | 与ISO、IEC合作开发物联网（IoT）和智能电网标准                | 与3GPP合作推进移动通信标准，政府间协商色彩浓厚               |

#### 例题

![image-20250318220707528](https://img.yatjay.top/md/20250318220707571.png)

解析：CMIP协议是在ISO制订的网络管理框架中提出的网络管理协议。通用管理信息协议（CMIP）是构建于开放系统互连（OSI）通信模型上的网络管理协议。在网络管理过程中，CMIP是通过事件报告进行工作的。CMIP在设计上以SNMP为基础，对SNMP的缺陷进行了改进，是一种更加复杂、更加详细的网络管理协议

### RMON

RMON (Remote Network Monitoring)

- 用于监视网络通信情况的设备叫<font color="red">网络监视器（Monitor）或网络分析器（Analyzer）、探测器（Probe）</font>等。
- RMON定义了**管理信息库RMON MIB-II（用于监控流量信息）与SNMP MIB（用于监控设备信息）**。
- RMON目标：监视子网范围内通信，从而减少管理站和被管理系统之间的<font color="red">通信负载</font>。

![image-20250318220753450](https://img.yatjay.top/md/20250318220753497.png)

#### SNMP和RMON区别

| 项目 | SNMP                                                    | RMON                               |
| ---- | ------------------------------------------------------- | ---------------------------------- |
| 功能 | <font color="red">提供基本的设备级监控和管理功能</font> | **提供详细的网络级监控和分析功能** |
| 用途 | <font color="red">适合快速部署和基础管理</font>         | **适合深入的流量分析和性能优化**   |

#### 例题

![image-20250318220857561](https://img.yatjay.top/md/20250318220857599.png)