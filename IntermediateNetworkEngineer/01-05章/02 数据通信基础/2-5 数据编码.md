# 2-5 数据编码

常用编码方案：重点是**曼彻斯特编码**和**差分曼彻斯特编码**

![image-20230214193848635](https://img.yatjay.top/md/image-20230214193848635.png)

## 单极性码和双极性码

### 单极性码

单极性码：在单极性编码中，仅使用一种极性的电压或电流来表示数据。

例如，正电压（或正电流）表示逻辑"1"，而零电压（或无电流）表示逻辑"0"

单极性码的问题在于，如果电平不高不低为0.5，那么难以知道其表示什么

![image-20230214194309697](https://img.yatjay.top/md/image-20230214194309697.png)

### 双极性码

双极性码：分别用正、负电压表示二进制数“0”和“1”。双极性编码使用两种相反的电压极性来表示二进制信息。通常，正电压（或正电流）表示逻辑"1"，负电压（或负电流）表示逻辑"0"。

比如，用高电压表示二进制数“0”，用低电压表示二进制数“1”

这种编码电平相差较大，抗干扰能力较好（如果电平不高不低为0.5，那么距离高电平较近，表示的是二进制数“0”）

![image-20230214194318832](https://img.yatjay.top/md/image-20230214194318832.png)

## 交替反转编码(0表0,1跳0不跳)

AMI交替翻转编码：信号在三个电平(正、负、零）之间变化，一种典型的双极性编码就是信号**交替反转编码(Altemate Mark Inversion，AMI)**。AMI编码（Alternate Mark Inversion，交替标记反转编码）是一种双极性编码方式

如下图，**0电平表示0，1则在正负之间交替翻转。1跳0不跳，下一个“1”和上一个“1”交替反转**

![image-20230214194522779](https://img.yatjay.top/md/image-20230214194522779.png)



## 归零码与不归零码

### 归零编码(归零过程表示0、1)

在归零编码(Return Zero，RZ)中，码元中间的信号回归到零电平，每个码元都要回归到0电平

从负电平到零电平的转换边表示码元“1”，从正电平到零电平的转换边表示码元“0"（笔者注：极性选择了单极性，因此本例为单极性归零编码）

<font color = red>笔者注：注意这里引入了**电平变化的过程****表示编码，前面的单极性码、极性码、双极性码都是使用电平的**状态**表示编码。而且电平变化过程极快，几乎不耗时间</font>

![image-20230214202951496](https://img.yatjay.top/md/image-20230214202951496.png)

### 不归零码(出现“1”时电平翻转，当“0”出现时电平不翻转)

**不归零编码( Not Return to Zero，NRZ)**：就是指**在整个码元时间内，电平不会出现0电平**。

例如下图，采用不归零编码产生的该比特流的相应信号，正电平表示比特1，负电平表示比特0

![image-20230817222657973](https://img.yatjay.top/md/image-20230817222657973.png)

## 笔者小结

- 单极性和双极性描述的是使用几种极性的电压或电流来进行数据编码

  - 单极性：仅使用一种极性的电压或电流来表示数据

  - 双极性：使用两种相反的电压极性来表示二进制信息

- 不归零和归零引入了电平的**变化过程**来进行编码，不归零和归零描述的是在码元时间内，电平会不会出现0电平
  - 归零编码：要求每个码元期间信号至少有一次返回到零电平。
  -  不归零编码：是指信号在整个码元期间维持不变，直到下一个码元开始时才可能发生变化。

因此，极性选择和是否归零是编码方式的2个不同角度的选项，可以组合使用

- **单极性归零码**：在逻辑"1"的表示期间，信号上升到某个正值然后归零；而在逻辑"0"期间，信号保持在零电平。
- **双极性归零码**：类似于单极性归零码，但在双极性归零码中，逻辑"1"可能表现为正脉冲至零电平，而逻辑"0"表现为负脉冲至零电平。
- **单极性不归零码**：在逻辑"1"时，信号保持恒定的正值（比如正电压或正电流），而在逻辑"0"时，信号为零电平（零电压或无电流）。
- **双极性不归零码**：逻辑"1"时信号为正极性，逻辑"0"时信号为负极性，两种状态均持续整个码元宽度，不回零。

## 差分码

**差分码**规律：高低电平之间跳转，当出现“1”时电平翻转，当“0”出现时电平不翻转

主要用在终端到调制解调器的接口中

下图所示的差分码，其实也是一种不归零码

笔者注：差分即意味着码元的电平变化取决与前一个码元

![image-20230214203124929](https://img.yatjay.top/md/image-20230214203124929.png)

## 双相码

双相码要求每一位都有一个电平转换，**一高一低，必须翻转**

编码的特点是∶具有自定时和检测错误的功能

**曼彻斯特和差分曼彻斯特码**就是典型的双相码

### 曼彻斯特编码(重点考点)(高低跳变表示0、1)

曼彻斯特编码是一种双相码，在每个码元中间均有一个跳变（每个数据位都包含高电平和低电平），**第一个编码自定义**

假如下图由高电平向低电平**跳变**代表“0”，由低电平向高电平跳变代表“1”

曼彻斯特编码常用于**以太网**中

<font color = red>笔者注：注意这里引入了**高低电平的跳变**表示编码</font>

![image-20230214203303692](https://img.yatjay.top/md/image-20230214203303692.png)

### 差分曼彻斯特编码(重点考点)(每时钟周期中间都有一次电平跳变，用**码元开始处**电平是否发生变化来表示数据)

差分曼彻斯特编码也是一种双相码，在每个比特中间均有一个跳变，**第一个编码自定义**，用在令牌环网中

**对比起码元始处电平(上一个的终止与下一个起点)**：**有跳变代表“0”，无跳变代表“1”【有0无1】**

差分曼彻斯特编码是一种使用中位转变来计时的编码方案。数据通过在数据位开始处加一转变来表示。令牌环局域网就利用差分曼彻斯特编码方案。在<u>每个时钟周期的中间都有一次电平跳变，这个跳变做同步之用</u>。 在每个时钟周期的<u>起始处：跳变则说明该比特是0，不跳变则说明该比特是1</u>。

**不是比较形状，比较起始电平(上一个的终止与下一个起点)**

![image-20230214203517124](https://img.yatjay.top/md/image-20230214203517124.png)

![image-20230817223529473](https://img.yatjay.top/md/image-20230817223529473.png)

这是差分曼彻斯特编码。如图所示，在每个码原时间的中间时刻，信号都会发生跳变。

与曼彻斯特编码不同，跳变仅表示时钟，而用**码元开始处**电平是否发生变化来表示数据

### 两种曼彻斯特编码特点

- 两种曼彻斯特编码优点：将**时钟和数据包含在信号数据流**中，也称**自同步码**

- 编码效率低：每个码元都要调制为两个不同的电平(两个电平才表示一个码元)，因而调制速率是码元速率的两倍，这对信道的带宽提出了更高的要求，例如当数据传输速率为100Mbps时，需要200MHz的脉冲

- 编码效率都是50%，一般只用于最早的10M以太网编码

## 4B/5B编码(重点考点)

**4B/5B编码**：发送数据流每4bits进行一个分组，先使用不归零码（NRZ-I），编码成5bit，多出一位用于解决同步问题，编码效率为**4/5 = 80%**

### 各种编码效率

- **曼码和差分曼码效率50%**，用于10M以太网
- **4B/5B效率80%**，用于百兆以太网
- **8B/10B效率80%**，用于千兆以太网
- **64B/66B效率97%**，用于万兆以太网

## 例题

![image-20230220202620168](https://img.yatjay.top/md/image-20230220202620168.png)



![image-20230220202710318](https://img.yatjay.top/md/image-20230220202710318.png)



![image-20230220202731319](https://img.yatjay.top/md/image-20230220202731319.png)

解析：方法1：<font color=red>突破口：不要假设，不要假设，假设效率很低，看差分曼彻斯特在第二个时钟周期有无跳变，有跳变表示0，无跳变表示1</font>

​	方法2：假设一下曼彻斯特编码的图形变化自定义
