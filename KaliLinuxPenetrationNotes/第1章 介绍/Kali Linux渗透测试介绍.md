# 第一章 介绍

## 安全问题的根源

- **分层思想的优劣**：分层思想使得开发、网络工程师、数据库工程师只片面地看待自身业务，由于分层思想导致技术从业者对问题的看待比较片面
- **只追求功能实现**：技术从业者只追求系统的功能实现，很少从安全角度审示自己安全方面的工作，
- **最大的安全威胁是人**：综上两点，安全的最大威胁说到底是人，除非人是完美的不会犯错的人

## 安全的目标——先于攻击者发现和防止漏洞出现

### 攻击型安全

使用攻击手段探测系统，发现系统的安全隐患，以黑客的角度发现漏洞，在系统上线之前排除隐患——渗透测试

### 防护型安全

传统安全从防守角度进行建设，弊端在于防护不够全面，无法防护到所有方面

投入大周期长，收效甚微，近年来提倡攻击型的安全建设

## 渗透测试

- 尝试挫败安全防御机制，发现系统安全弱点；

- 从攻击者的角度思考，测量安全防护有效性；

- 证明安全问题的存在，而非破坏：拿到一台主机只是渗透测试的开始;

- 道德约束；

- 法律；

## 渗透测试标准

- PETS（Penetration Test Standard）渗透测试标准 (http://www.pentest-standard.org)

  ### 渗透测试的7个阶段

1. 前期交互阶段：
   - 与客户进行沟通，重点是划清渗透测试的范围，一般来说范围是一个应用系统，每一次针对一个应用系统
   - 确定工作方式：现场还是远程、是否需要社会工程学、是否需要DDoS攻击（一般不需要社工和DDoS攻击）

2. 情报收集阶段：对目标系统进行信息收集
3. 威胁建模阶段：通过前期信息收集，确定一条或两条效率最高可以进入信息系统的途径，即威胁建模
4. 漏洞分析阶段：分析收集信息，如是否使用低版本的软件、是否存在0Day
5. 渗透攻击阶段：
   - 此阶段往往需要继续深入开展信息收集、威胁建模、漏洞分析，实际环境往往无法一次成功
   - 仅控制一台服务器不算渗透测试成功
6. 后渗透测试阶段：通过一台服务器继续开展内网渗透
7. 渗透测试报告：说明漏洞发现、利用、危害、修补

## 渗透测试项目

- 渗透测试范围

- 获得授权

- 渗透测试方法
  - 是否允许社会工程学
  - 是否允许拒绝服务攻击

## 渗透测试误区

- 扫描器就是一切：所有的自动化安全扫描器对于业务逻辑层面的安全问题完全无能为力
- 忽略业务逻辑重的漏洞

## KALI

Kali (kali，音译为迦梨或迦利，字面意思是“黑色的”）是印度教中一个重要的女神，她是湿婆神妃帕尔瓦蒂产生的化身，印度神话中最为黑暗和暴虐的黑色地母。她皮肤黝黑，青面獠牙，额头和湿婆神一样有第三只眼睛，四只手臂分持武器，戴着蛇和骷髅的项链，舌头上滴着血。有她的传说总是与杀戮和鲜血相连，史上曾经用过活人献祭，是印度教派中最为隐晦和神秘的一派。

迦梨一词也可解释为时间，故中文翻译为时母。在后期的信仰体系中，时母被认为与时间和变化有关,象征着强大和新生。

在面对前所未有的强大的阿修罗时陷入困境，这时候她的面孔因为惊怒两发黑，从她脸上的黑气中诞生了可怕的迦梨。今日印度的都市加尔各答，名字的意思就是“迦梨的沐浴场”。

### Kali Linux介绍

- 基于Debian的Linux发行版本
- 前身是BackTrack，2013年3月发布，是BT的升级版本
- 用于渗透测试和安全审计;
- 包含600+安全工具
- FHS标准目录结构：即Linux的标准目录结构，BT不是标准目录，升级后使用了Linux的目录结构
- 定制内核：主要指定制了关于无线驱动的内核
- 支持ARM和手机平台
- 开源免费

### KALI LINUX策略

Kali Linux在其官网给出了各类策略

- Root用户策略：普通Linux安装系统后需要创建一个普通用户，正常使用普通用户操作，需要时切换至root用户；Kali上大量工具只能在root下使用，因此Kali默认即为root用户，官方提倡如此

- 网络服务策略：默认所有的网络服务关闭，默认所有的自启动脚本关闭，如安装Apache后，普通Linux默认开机自启动；Kali则需要手动执行，才会开启服务

- 更新升级策略：Kali基于Debian，Linux相关更新跟随Debian；Kali自带600多工具的更新维护由官方Offensive Security（*OffSec*）团队负责

## 关于本教程

- 这是一门关于渗透测试方法的课
- 这是一门关于kali linix基本使用的教程
- 不要停留在了解的程度
- 实践再实践是最好的老师
- 这里只是起跑线而不是终点线
- Kali很强大，但不是全部